<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>SquidFaq/SquidLogs</title><revhistory><revision><revnumber>45</revnumber><date>2018-11-30 19:10:32</date><authorinitials>AlexRousskov</authorinitials><revremark>Fixed UNMODIFIED description: REFRESH_UNMODIFIED does not imply that the client gets a 304. Did not fix the wrong UNMODIFIED grouping (or the wrong group title).</revremark></revision><revision><revnumber>44</revnumber><date>2018-06-19 05:04:44</date><authorinitials>AlexRousskov</authorinitials><revremark>Provided a pointer to more information about collapsed requests and warned about CF tag non-availability in older Squids.</revremark></revision><revision><revnumber>43</revnumber><date>2018-06-14 10:08:16</date><authorinitials>AmosJeffries</authorinitials><revremark>add new CF log tag - documentation take as-is from the code. May looks odd standalone but makes sense when one is aware that proxies can make 0-N upstream requests per client request.</revremark></revision><revision><revnumber>42</revnumber><date>2018-01-26 17:20:14</date><authorinitials>AlexRousskov</authorinitials><revremark>Documented ANY_OLD_PARENT.</revremark></revision><revision><revnumber>41</revnumber><date>2017-09-28 17:47:58</date><authorinitials>AlexRousskov</authorinitials><revremark>Documented _IGNORED result code suffix.</revremark></revision><revision><revnumber>40</revnumber><date>2015-11-18 14:42:33</date><authorinitials>AlexRousskov</authorinitials><revremark>Marked SHARED as not yet supported.</revremark></revision><revision><revnumber>39</revnumber><date>2014-10-14 01:45:00</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>38</revnumber><date>2014-10-14 01:44:41</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>37</revnumber><date>2014-10-11 11:46:25</date><authorinitials>AmosJeffries</authorinitials><revremark>add details for DENIED_REPLY logging code.</revremark></revision><revision><revnumber>36</revnumber><date>2014-06-03 08:53:44</date><authorinitials>AmosJeffries</authorinitials><revremark>TUNNEL is now merged.</revremark></revision><revision><revnumber>35</revnumber><date>2014-03-22 05:49:28</date><authorinitials>AmosJeffries</authorinitials><revremark>add TUNNEL and SHARED log tags description</revremark></revision><revision><revnumber>34</revnumber><date>2012-10-31 11:49:09</date><authorinitials>AmosJeffries</authorinitials><revremark>mention TCP_REDIRECT is visible from 3.2 onward</revremark></revision><revision><revnumber>33</revnumber><date>2012-05-28 06:24:47</date><authorinitials>eu.squid-cache.org</authorinitials></revision><revision><revnumber>32</revnumber><date>2012-05-08 01:01:23</date><authorinitials>AmosJeffries</authorinitials><revremark>When built with -DLOG_TCP_REDIRECTS Squid produces TCP_REDIRECT code.</revremark></revision><revision><revnumber>31</revnumber><date>2012-02-03 21:24:32</date><authorinitials>AlexRousskov</authorinitials><revremark>Removed misplaced and duplicated UDP text from the TCP row.</revremark></revision><revision><revnumber>30</revnumber><date>2012-02-03 21:21:58</date><authorinitials>AlexRousskov</authorinitials><revremark>Added another case for NONE Squid result code. We should really have a designated TCP_ codes for those exceptional cases instead.</revremark></revision><revision><revnumber>29</revnumber><date>2012-02-03 04:04:52</date><authorinitials>AmosJeffries</authorinitials><revremark>polish up the response codes documentation. break down into per-tag descriptions in preparation for making these codes more dynamic and accurate.</revremark></revision><revision><revnumber>28</revnumber><date>2011-11-22 23:53:37</date><authorinitials>AmosJeffries</authorinitials><revremark>add cache.log section on error messages. polish display order a little</revremark></revision><revision><revnumber>27</revnumber><date>2011-06-22 06:52:40</date><authorinitials>AmosJeffries</authorinitials><revremark>document PINNED and ORIGINAL_DST codes</revremark></revision><revision><revnumber>26</revnumber><date>2011-02-15 22:23:25</date><authorinitials>AmosJeffries</authorinitials><revremark>tabularize and rfc-link the HTTP status codes we use. second copy of 424 locked has no available information online, where did it come from?</revremark></revision><revision><revnumber>25</revnumber><date>2010-06-10 03:36:33</date><authorinitials>AmosJeffries</authorinitials><revremark>indent menu for easier reading.</revremark></revision><revision><revnumber>24</revnumber><date>2010-06-10 03:34:36</date><authorinitials>AmosJeffries</authorinitials><revremark>shuffle logformat details to LogFormat feature page, update wiki-links and some texts.</revremark></revision><revision><revnumber>23</revnumber><date>2010-06-04 17:50:05</date><authorinitials>AlexRousskov</authorinitials><revremark>Documented _TIMEDOUT and _ABORTED status code suffixes. Detailed NONE status code documentation.</revremark></revision><revision><revnumber>22</revnumber><date>2010-05-14 10:09:43</date><authorinitials>eu.squid-cache.org</authorinitials></revision><revision><revnumber>21</revnumber><date>2010-05-14 08:27:36</date><authorinitials>eu.squid-cache.org</authorinitials></revision><revision><revnumber>20</revnumber><date>2010-04-08 02:44:34</date><authorinitials>AmosJeffries</authorinitials><revremark>typo</revremark></revision><revision><revnumber>19</revnumber><date>2010-04-08 02:39:27</date><authorinitials>AmosJeffries</authorinitials><revremark>some status code updates.</revremark></revision><revision><revnumber>18</revnumber><date>2009-04-17 11:44:46</date><authorinitials>AmosJeffries</authorinitials><revremark>link to LogFormat feature docs</revremark></revision><revision><revnumber>17</revnumber><date>2009-03-23 12:04:57</date><authorinitials>AmosJeffries</authorinitials><revremark>correct syslog syntax in demo</revremark></revision><revision><revnumber>16</revnumber><date>2008-12-21 22:48:36</date><authorinitials>AmosJeffries</authorinitials><revremark>drop more pre-2.5 details.</revremark></revision><revision><revnumber>15</revnumber><date>2008-11-19 00:28:29</date><authorinitials>AmosJeffries</authorinitials><revremark>drop some Squid &lt;2.6 info (comment one bit that may prove useful in future)</revremark></revision><revision><revnumber>14</revnumber><date>2008-07-02 13:17:26</date><authorinitials>wifi-nat.sydney.corp.yahoo.com</authorinitials></revision><revision><revnumber>13</revnumber><date>2008-05-18 19:38:57</date><authorinitials>localhost</authorinitials><revremark>converted to 1.6 markup</revremark></revision><revision><revnumber>12</revnumber><date>2008-02-26 12:54:33</date><authorinitials>kinkie</authorinitials><revremark>Fixed mistyped external link</revremark></revision><revision><revnumber>11</revnumber><date>2007-05-27 10:34:15</date><authorinitials>kinkie</authorinitials><revremark>Updated access.log chapter to squid-2.6 level. INCOMPLETE WORK</revremark></revision><revision><revnumber>10</revnumber><date>2006-08-25 13:37:42</date><authorinitials>kinkie</authorinitials></revision><revision><revnumber>9</revnumber><date>2006-06-23 00:04:01</date><authorinitials>Henrik Nordstr√∂m</authorinitials></revision><revision><revnumber>8</revnumber><date>2006-06-22 00:44:02</date><authorinitials>kinkie</authorinitials><revremark>added note on tail -F</revremark></revision><revision><revnumber>7</revnumber><date>2006-06-22 00:34:43</date><authorinitials>kinkie</authorinitials><revremark>Added chapter on logging to a pipe.</revremark></revision><revision><revnumber>6</revnumber><date>2006-03-03 09:20:57</date><authorinitials>kinkie</authorinitials></revision><revision><revnumber>5</revnumber><date>2006-02-10 12:57:42</date><authorinitials>kinkie</authorinitials><revremark>Markup fix</revremark></revision><revision><revnumber>4</revnumber><date>2006-01-30 22:28:52</date><authorinitials>hq-x.measurement-factory.com</authorinitials></revision><revision><revnumber>3</revnumber><date>2006-01-30 22:27:20</date><authorinitials>hq-x.measurement-factory.com</authorinitials></revision><revision><revnumber>2</revnumber><date>2006-01-30 00:22:56</date><authorinitials>kinkie</authorinitials><revremark>Minor fixes to markup, added link to index.</revremark></revision><revision><revnumber>1</revnumber><date>2006-01-24 21:02:29</date><authorinitials>kinkie</authorinitials></revision></revhistory></articleinfo><section><title>Squid Log Files</title><para>The logs are a valuable source of information about Squid workloads and performance. The logs record not only access information, but also system configuration errors and resource consumption (e.g. memory, disk space). There are several log file maintained by Squid. Some have to be explicitly activated during compile time, others can safely be deactivated during run-time. </para><para>There are a few basic points common to all log files. The time stamps logged into the log files are usually UTC seconds unless stated otherwise. The initial time stamp usually contains a millisecond extension. </para><section><title>cache.log</title><para>The <emphasis>cache.log</emphasis> file contains the debug and error messages that Squid generates. If you start your Squid using the <emphasis>-s</emphasis> command line option, a copy of certain messages will go into your syslog facilities. It is a matter of personal preferences to use a separate file for the squid log data. </para><para>From the area of automatic log file analysis, the <emphasis>cache.log</emphasis> file does not have much to offer. You will usually look into this file for automated error reports, when programming Squid, testing new features, or searching for reasons of a perceived misbehavior, etc. </para><section><title>Squid Error Messages</title><para>Error messages come in several forms. Debug traces are not logged at level 0 or level 1. These levels are reserved for important and critical administrative messages. </para><itemizedlist><listitem><para><emphasis role="strong">FATAL</emphasis> messages indicate a problem which has killed the Squid process. Affecting all current client traffic being supplied by that Squid instance. </para><itemizedlist><listitem><para>Obviously if these occur when starting or configuring a Squid component it <emphasis role="strong">must</emphasis> be resolved before you can run Squid. </para></listitem></itemizedlist></listitem><listitem><para><emphasis role="strong">ERROR</emphasis> messages indicate a serious problem which has broken an individual client transaction and may have some effect on other clients indirectly. But has not completely aborted all traffic service. </para><itemizedlist><listitem><para>These can also occur when starting or configuring Squid components. In which case any service actions which that component would have supplied will not happen until it is resolved and Squid reconfigured. </para></listitem><listitem><para>NOTE: Some log level 0 error messages inherited from older Squid versions exist without any prioritization tag. </para></listitem></itemizedlist></listitem><listitem><para><emphasis role="strong">WARNING</emphasis> messages indicate problems which might be causing problems to the client, but Squid is capable of working around automatically. These usually only display at log level 1 and higher. </para><itemizedlist><listitem><para>NOTE: Some log level 1 warning messages inherited from older Squid versions exist without any prioritization tag. </para></listitem></itemizedlist></listitem><listitem><para><emphasis role="strong">SECURITY ERROR</emphasis> messages indicate problems processing a client request with the security controls which Squid has been configured with. Some impossible condition is required to pass the security test. </para><itemizedlist><listitem><para>This is commonly seen when testing whether to accept a client <emphasis role="strong">request</emphasis> based on some <emphasis role="strong">reply</emphasis> detail which will only be available in the future. </para></listitem></itemizedlist></listitem><listitem><para><emphasis role="strong">SECURITY ALERT</emphasis> messages indicate security attack problems being detected. This is only for problems which are unambiguous. 'Attacks' signatures which can appear in normal traffic are logged as regular WARNING. </para><itemizedlist><listitem><para>A complete solution to these usually requires fixing the client, which may not be possible. </para></listitem><listitem><para>Administrative workarounds (extra firewall rules etc) can assist Squid in reducing the damage to network performance. </para></listitem><listitem><para>Attack notices may seem rather critical, but occur at level 1 since in all cases Squid also has some workaround it can perform. </para></listitem></itemizedlist></listitem><listitem><para><emphasis role="strong">SECURITY NOTICE</emphasis> messages can appear during startup and reconfigure to indicate security related problems with the configuration file setting. These are accompanied by hints for better configuration where possible, and an indication of what Squid is going to do instead of the configured action. </para></listitem></itemizedlist><para>Some of the more frequently questioned messages and what they mean are outlined in the <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/KnowledgeBase#">KnowledgeBase</ulink>: </para><itemizedlist><listitem override="none"><para><orderedlist><listitem><ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/KnowledgeBase/ExcessData">KnowledgeBase/ExcessData</ulink></listitem><listitem><ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/KnowledgeBase/FailedToSelectSource">KnowledgeBase/FailedToSelectSource</ulink></listitem><listitem><ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/KnowledgeBase/HostHeaderForgery">KnowledgeBase/HostHeaderForgery</ulink></listitem><listitem><ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/KnowledgeBase/QueueCongestion">KnowledgeBase/QueueCongestion</ulink></listitem><listitem><ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/KnowledgeBase/TooManyQueued">KnowledgeBase/TooManyQueued</ulink></listitem><listitem><ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/KnowledgeBase/UnparseableHeader">KnowledgeBase/UnparseableHeader</ulink></listitem><listitem><ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/SquidFaq/SquidLogs">SquidFaq/SquidLogs</ulink></listitem></orderedlist><!--The macro FullSearch caused an error and should be blacklisted. It returned the data '

' which caused the docbook-formatter to choke. Please file a bug.--> </para></listitem></itemizedlist></section></section><section><title>access.log</title><para>Most log file analysis program are based on the entries in <emphasis>access.log</emphasis>. </para><para><ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-2.7#">Squid-2.7</ulink> and <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-3.2#">Squid-3.2</ulink> allow the administrators to configure their <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Features/LogFormat#">logfile format</ulink> and <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Features/LogModules#">log output method</ulink> with great flexibility. Previous versions offered a much more limited functionality. </para><section><title>Squid result codes</title><para>The Squid result code is composed of several tags (separated by underscore characters) which describe the response sent to the client. </para><itemizedlist><listitem><para>One of these tags always exists to describe how it was delivered: </para><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">TCP</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> Requests on the HTTP port (usually 3128). </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">UDP</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> Requests on the ICP port (usually 3130) or HTCP port (usually 4128). If ICP logging was disabled using the <emphasis>log_icp_queries</emphasis> option, no ICP replies will be logged. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">NONE</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> Squid delivered an unusual response or no response at all. Seen with cachemgr requests and errors, usually when the transaction fails before being classified into one of the above outcomes. Also seen with responses to CONNECT requests. </para></entry></row></tbody></tgroup></informaltable></listitem><listitem><para>These tags are optional and describe why the particular handling was performed or where the request came from: </para><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">CF</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> At least one request in this transaction was collapsed. See <ulink url="http://www.squid-cache.org/Doc/config/collapsed_forwarding#">collapsed_forwarding</ulink> for more details about request collapsing. Support for this tag has been added to Squid v5 on 2018-06-18 (commit <ulink url="https://github.com/squid-cache/squid/commit/d2a6dcba707c15484c255e7a569b90f7f1186383">d2a6dc</ulink>). It may not be available in earlier Squid versions. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">CLIENT</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The client request placed limits affecting the response. Usually seen with client issued a &quot;no-cache&quot;, or analogous cache control command along with the request. Thus, the cache has to validate the object. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">IMS</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The client sent a revalidation (conditional) request. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">ASYNC</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The request was generated internally by Squid. Usually this is background fetches for cache information exchanges, background revalidation from <emphasis>stale-while-revalidate</emphasis> cache controls, or ESI sub-objects being loaded. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">SWAPFAIL</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The object was believed to be in the cache, but could not be accessed. A new copy was requested from the server. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">REFRESH</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> A revalidation (conditional) request was sent to the server. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">SHARED</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> This tag is not supported yet. This request was combined with an existing transaction by collapsed forwarding. NOTE: the existing request is not marked as SHARED.</para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">REPLY</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The HTTP reply from server or peer. Usually seen on <emphasis role="strong">DENIED</emphasis> due to <ulink url="http://www.squid-cache.org/Doc/config/http_reply_access#">http_reply_access</ulink> ACLs preventing delivery of servers response object to the client. </para></entry></row></tbody></tgroup></informaltable></listitem><listitem><para>These tags are optional and describe what type of object was produced: </para><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">NEGATIVE</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> Only seen on <emphasis role="strong">HIT</emphasis> responses. Indicating the response was a cached error response. e.g. &quot;404 not found&quot; </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">STALE</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The object was cached and served stale. This is usually caused by <emphasis>stale-while-revalidate</emphasis> or <emphasis>stale-if-error</emphasis> cache controls. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">OFFLINE</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The requested object was retrieved from the cache during <ulink url="http://www.squid-cache.org/Doc/config/offline_mode#">offline_mode</ulink>. The offline mode never validates any object. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">INVALID</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> An invalid request was received. An error response was delivered indicating what the problem was. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">FAIL</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> Only seen on <emphasis role="strong">REFRESH</emphasis> to indicate the revalidation request failed. The response object may be the server provided network error or the stale object which was being revalidated depending on <emphasis>stale-if-error</emphasis> cache control. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">MODIFIED</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> Only seen on <emphasis role="strong">REFRESH</emphasis> responses to indicate revalidation produced a new modified object. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">UNMODIFIED</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> Only seen on <emphasis role="strong">REFRESH</emphasis> responses to indicate revalidation produced a 304 (Not Modified) status. The client gets either a full 200 (OK), a 304 (Not Modified), or (in theory) another response, depending on the client request and other details. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">REDIRECT</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> Squid generated an HTTP redirect response to this request. Only on <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-3.2#">Squid-3.2</ulink>+ or Squid built with -DLOG_TCP_REDIRECTS compiler flag. </para></entry></row></tbody></tgroup></informaltable></listitem><listitem><para>These tags are optional and describe whether the response was loaded from cache, network, or otherwise: </para><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">HIT</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The response object delivered was the local cache object. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">MEM</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> Additional tag indicating the response object came from memory cache, avoiding disk accesses. Only seen on <emphasis role="strong">HIT</emphasis> responses. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">MISS</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The response object delivered was the network response object. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">DENIED</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The request was denied by access controls. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">NOFETCH</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> A ICP specific type. Indicating service is alive, but not to be used for this request. Sent during &quot;-Y&quot; startup, or during frequent failures, a cache in hit only mode will return either <emphasis role="strong">UDP_HIT</emphasis> or <emphasis role="strong">UDP_MISS_NOFETCH</emphasis>. Neighbours will thus only fetch hits. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">TUNNEL</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> A binary tunnel was established for this transaction. Only on <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-3.5#">Squid-3.5</ulink>+ </para></entry></row></tbody></tgroup></informaltable></listitem><listitem><para>These tags are optional and describe some error conditions which occured during response delivery (if any): </para><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">ABORTED</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The response was not completed due to the connection being aborted (usually by the client). </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">TIMEOUT</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> The response was not completed due to a connection timeout. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">IGNORED</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> While refreshing a previously cached response A, Squid got a response B that was <emphasis>older</emphasis> than A (as determined by the Date header field). Squid ignored response B (and attempted to use A instead). This &quot;ignore older responses&quot; logic complies with RFC <ulink url="https://tools.ietf.org/rfc/rfc7234#">7234</ulink> Section <ulink url="https://tools.ietf.org/html/rfc7234#section-4">4</ulink> requirement: a cache MUST use the most recent response (as determined by the Date header field). </para></entry></row></tbody></tgroup></informaltable></listitem></itemizedlist></section><section><title>HTTP status codes</title><para>These are taken from RFC <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink> (HTTP/1.0), <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> (HTTP/1.1) and verified for Squid. Squid uses almost all codes except 416 (Request Range Not Satisfiable). Extra codes used in the Squid logs (but not live traffic) include 000 for a result code being unavailable, and 600 to signal an invalid header, a proxy error. Also, some definitions were added as for RFC <ulink url="https://tools.ietf.org/rfc/rfc2518#">2518</ulink> and <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> (WebDAV). Yes, there are really two entries for status code 424: </para><informaltable><tgroup cols="3"><colspec colname="col_0"/><colspec colname="col_1"/><colspec colname="col_2"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <emphasis role="strong">Status</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> <emphasis role="strong">Description</emphasis> </para></entry><entry colsep="1" rowsep="1"><para> <emphasis role="strong"> RFC(s)</emphasis> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 000 </para></entry><entry colsep="1" rowsep="1"><para> Used mostly with UDP traffic. </para></entry><entry colsep="1" rowsep="1"><para> N/A </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"/><entry colsep="1" rowsep="1"><para> <emphasis role="strong">Informational</emphasis> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 100 </para></entry><entry colsep="1" rowsep="1"><para> Continue </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink></para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 101 </para></entry><entry colsep="1" rowsep="1"><para> Switching Protocols </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 102 </para></entry><entry colsep="1" rowsep="1"><para> Processing </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2518#">2518</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"/><entry colsep="1" rowsep="1"><para> <emphasis role="strong">Successful Transaction</emphasis> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 200 </para></entry><entry colsep="1" rowsep="1"><para> OK </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 201 </para></entry><entry colsep="1" rowsep="1"><para> Created </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 202 </para></entry><entry colsep="1" rowsep="1"><para> Accepted </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 203 </para></entry><entry colsep="1" rowsep="1"><para> Non-Authoritative Information </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 204 </para></entry><entry colsep="1" rowsep="1"><para> No Content </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 205 </para></entry><entry colsep="1" rowsep="1"><para> Reset Content </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 206 </para></entry><entry colsep="1" rowsep="1"><para> Partial Content </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 207 </para></entry><entry colsep="1" rowsep="1"><para> Multi Status </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2518#">2518</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"/><entry colsep="1" rowsep="1"><para> <emphasis role="strong">Redirection</emphasis> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 300 </para></entry><entry colsep="1" rowsep="1"><para> Multiple Choices </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 301 </para></entry><entry colsep="1" rowsep="1"><para> Moved Permanently </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 302 </para></entry><entry colsep="1" rowsep="1"><para> Moved Temporarily </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 303 </para></entry><entry colsep="1" rowsep="1"><para> See Other </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 304 </para></entry><entry colsep="1" rowsep="1"><para> Not Modified </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 305 </para></entry><entry colsep="1" rowsep="1"><para> Use Proxy </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 307 </para></entry><entry colsep="1" rowsep="1"><para> Temporary Redirect </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"/><entry colsep="1" rowsep="1"><para> <emphasis role="strong">Client Error</emphasis> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 400 </para></entry><entry colsep="1" rowsep="1"><para> Bad Request </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 401 </para></entry><entry colsep="1" rowsep="1"><para> Unauthorized </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 402 </para></entry><entry colsep="1" rowsep="1"><para> Payment Required </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 403 </para></entry><entry colsep="1" rowsep="1"><para> Forbidden </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 404 </para></entry><entry colsep="1" rowsep="1"><para> Not Found </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 405 </para></entry><entry colsep="1" rowsep="1"><para> Method Not Allowed </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 406 </para></entry><entry colsep="1" rowsep="1"><para> Not Acceptable </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 407 </para></entry><entry colsep="1" rowsep="1"><para> Proxy Authentication Required </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 408 </para></entry><entry colsep="1" rowsep="1"><para> Request Timeout </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 409 </para></entry><entry colsep="1" rowsep="1"><para> Conflict </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 410 </para></entry><entry colsep="1" rowsep="1"><para> Gone </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 411 </para></entry><entry colsep="1" rowsep="1"><para> Length Required </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 412 </para></entry><entry colsep="1" rowsep="1"><para> Precondition Failed </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 413 </para></entry><entry colsep="1" rowsep="1"><para> Request Entity Too Large </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 414 </para></entry><entry colsep="1" rowsep="1"><para> Request URI Too Large </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 415 </para></entry><entry colsep="1" rowsep="1"><para> Unsupported Media Type </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 416 </para></entry><entry colsep="1" rowsep="1"><para> Request Range Not Satisfiable </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 417 </para></entry><entry colsep="1" rowsep="1"><para> Expectation Failed </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 422 </para></entry><entry colsep="1" rowsep="1"><para> Unprocessable Entity </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2518#">2518</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 424 </para></entry><entry colsep="1" rowsep="1"><para> Locked </para></entry><entry colsep="1" rowsep="1"><para> (broken WebDAV implementations??) </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 424 </para></entry><entry colsep="1" rowsep="1"><para> Failed Dependency </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2518#">2518</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 433 </para></entry><entry colsep="1" rowsep="1"><para> Unprocessable Entity </para></entry><entry colsep="1" rowsep="1"/></row><row rowsep="1"><entry colsep="1" rowsep="1"/><entry colsep="1" rowsep="1"><para> <emphasis role="strong">Server Errors</emphasis> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 500 </para></entry><entry colsep="1" rowsep="1"><para> Internal Server Error </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 501 </para></entry><entry colsep="1" rowsep="1"><para> Not Implemented </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 502 </para></entry><entry colsep="1" rowsep="1"><para> Bad Gateway </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 503 </para></entry><entry colsep="1" rowsep="1"><para> Service Unavailable </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc1945#">1945</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 504 </para></entry><entry colsep="1" rowsep="1"><para> Gateway Timeout </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 505 </para></entry><entry colsep="1" rowsep="1"><para> HTTP Version Not Supported </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 507 </para></entry><entry colsep="1" rowsep="1"><para> Insufficient Storage </para></entry><entry colsep="1" rowsep="1"><para> <ulink url="https://tools.ietf.org/rfc/rfc2518#">2518</ulink>, <ulink url="https://tools.ietf.org/rfc/rfc4918#">4918</ulink> </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"/></row><row rowsep="1"><entry colsep="1" rowsep="1"/><entry colsep="1" rowsep="1"><para> Broken Server Software </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 600 </para></entry><entry colsep="1" rowsep="1"><para> Squid: header parsing error </para></entry><entry colsep="1" rowsep="1"/></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 601 </para></entry><entry colsep="1" rowsep="1"><para> Squid: header size overflow detected while parsing </para></entry><entry colsep="1" rowsep="1"/></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 601 </para></entry><entry colsep="1" rowsep="1"><para> roundcube: software configuration error </para></entry><entry colsep="1" rowsep="1"/></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> 603 </para></entry><entry colsep="1" rowsep="1"><para> roundcube: invalid authorization </para></entry><entry colsep="1" rowsep="1"/></row></tbody></tgroup></informaltable></section><section><title>Request methods</title><para>Squid recognizes several request methods as defined in RFC <ulink url="https://tools.ietf.org/rfc/rfc2616#">2616</ulink> and RFC <ulink url="https://tools.ietf.org/rfc/rfc2518#">2518</ulink> &quot;HTTP Extensions for Distributed Authoring -- WEBDAV&quot; extensions. </para><screen><![CDATA[ method    defined    cachabil.  meaning
 --------- ---------- ---------- -------------------------------------------
 GET       HTTP/0.9   possibly   object retrieval and simple searches.
 HEAD      HTTP/1.0   possibly   metadata retrieval.
 POST      HTTP/1.0   CC or Exp. submit data (to a program).
 PUT       HTTP/1.1   never      upload data (e.g. to a file).
 DELETE    HTTP/1.1   never      remove resource (e.g. file).
 TRACE     HTTP/1.1   never      appl. layer trace of request route.
 OPTIONS   HTTP/1.1   never      request available comm. options.
 CONNECT   HTTP/1.1r3 never      tunnel SSL connection.
 ICP_QUERY Squid      never      used for ICP based exchanges.
 PURGE     Squid      never      remove object from cache.
 PROPFIND  rfc2518    ?          retrieve properties of an object.
 PROPATCH  rfc2518    ?          change properties of an object.
 MKCOL     rfc2518    never      create a new collection.
 COPY      rfc2518    never      create a duplicate of src in dst.
 MOVE      rfc2518    never      atomically move src to dst.
 LOCK      rfc2518    never      lock an object against modifications.
 UNLOCK    rfc2518    never      unlock an object.]]></screen><para>Note that since Squid 3.1, methods not listed here (such as PATCH) are supported &quot;out of the box.&quot; </para></section><section><title>Hierarchy Codes</title><para><emphasis role="strong">NONE</emphasis> For TCP HIT, TCP failures, cachemgr requests and all UDP requests, there is no hierarchy information. </para><para><emphasis role="strong">DIRECT</emphasis> The object was fetched from the origin server. </para><para><emphasis role="strong">SIBLING_HIT</emphasis> The object was fetched from a sibling cache which replied with UDP_HIT. </para><para><emphasis role="strong">PARENT_HIT</emphasis> The object was requested from a parent cache which replied with UDP_HIT. </para><para><emphasis role="strong">DEFAULT_PARENT</emphasis> No ICP queries were sent. This parent was chosen because it was marked &quot;default&quot; in the config file. </para><para><emphasis role="strong">SINGLE_PARENT</emphasis> The object was requested from the only parent appropriate for the given URL. </para><para><emphasis role="strong">FIRST_UP_PARENT</emphasis> The object was fetched from the first parent in the list of parents. </para><para><emphasis role="strong">NO_PARENT_DIRECT</emphasis> The object was fetched from the origin server, because no parents existed for the given URL. </para><para><emphasis role="strong">FIRST_PARENT_MISS</emphasis> The object was fetched from the parent with the fastest (possibly weighted) round trip time. </para><para><emphasis role="strong">CLOSEST_PARENT_MISS</emphasis> This parent was chosen, because it included the the lowest RTT measurement to the origin server. See also the <emphasis>closest-only</emphasis> peer configuration option. </para><para><emphasis role="strong">CLOSEST_PARENT</emphasis> The parent selection was based on our own RTT measurements. </para><para><emphasis role="strong">CLOSEST_DIRECT</emphasis> Our own RTT measurements returned a shorter time than any parent. </para><para><emphasis role="strong">NO_DIRECT_FAIL</emphasis> The object could not be requested because of a firewall configuration, see also <emphasis>never_direct</emphasis> and related material, and no parents were available. </para><para><emphasis role="strong">SOURCE_FASTEST</emphasis> The origin site was chosen, because the source ping arrived fastest. </para><para><emphasis role="strong">ROUNDROBIN_PARENT</emphasis> No ICP replies were received from any parent. The parent was chosen, because it was marked for round robin in the config file and had the lowest usage count. </para><para><emphasis role="strong">CACHE_DIGEST_HIT</emphasis> The peer was chosen, because the cache digest predicted a hit. This option was later replaced in order to distinguish between parents and siblings. </para><para><emphasis role="strong">CD_PARENT_HIT</emphasis> The parent was chosen, because the cache digest predicted a hit. </para><para><emphasis role="strong">CD_SIBLING_HIT</emphasis> The sibling was chosen, because the cache digest predicted a hit. </para><para><emphasis role="strong">NO_CACHE_DIGEST_DIRECT</emphasis> This output seems to be unused? </para><para><emphasis role="strong">CARP</emphasis> The peer was selected by CARP. </para><para><emphasis role="strong">PINNED</emphasis> The server connection was pinned by NTLM or Negotiate authentication requirements. </para><para><emphasis role="strong">ORIGINAL_DST</emphasis> The server connection was limited to the client provided destination IP. This occurs on interception proxies when Host security is enabled, or <ulink url="http://www.squid-cache.org/Doc/config/client_dst_passthru#">client_dst_passthru</ulink> transparency is enabled. </para><para><emphasis role="strong">ANY_OLD_PARENT</emphasis> (former ANY_PARENT?) Squid used the first considered-alive parent it could reach. This happens when none of the specific parent cache selection algorithms (e.g., userhash or carp) were enabled, all enabled algorithms failed to find a suitable parent, or all suitable parents found by those algorithms failed when Squid tried to forward the request to them. </para><para><emphasis role="strong">INVALID CODE</emphasis> part of <emphasis>src/peer_select.c:hier_strings[]</emphasis>. </para><para>Almost any of these may be preceded by 'TIMEOUT_' if the two-second (default) timeout occurs waiting for all ICP replies to arrive from neighbors, see also the <emphasis>icp_query_timeout</emphasis> configuration option. </para><para>The following hierarchy codes were removed from Squid-2: </para><screen><![CDATA[code                  meaning
--------------------  -------------------------------------------------
PARENT_UDP_HIT_OBJ    hit objects are not longer available.
SIBLING_UDP_HIT_OBJ   hit objects are not longer available.
SSL_PARENT_MISS       SSL can now be handled by squid.
FIREWALL_IP_DIRECT    No special logging for hosts inside the firewall.
LOCAL_IP_DIRECT       No special logging for local networks.]]></screen></section></section><section><title>store.log</title><para>This file covers the objects currently kept on disk or removed ones. As a kind of transaction log (or journal) it is usually used for debugging purposes. A definitive statement, whether an object resides on your disks is only possible after analyzing the <emphasis>complete</emphasis> log file. The release (deletion) of an object may be logged at a later time than the swap out (save to disk). </para><para>The <emphasis>store.log</emphasis> file may be of interest to log file analysis which looks into the objects on your disks and the time they spend there, or how many times a hot object was accessed. The latter may be covered by another log file, too. With knowledge of the <emphasis>cache_dir</emphasis> configuration option, this log file allows for a URL to filename mapping without recursing your cache disks. However, the Squid developers recommend to treat <emphasis>store.log</emphasis> primarily as a debug file, and so should you, unless you know what you are doing. </para><para>The print format for a store log entry (one line) consists of thirteen space-separated columns, compare with the <emphasis>storeLog()</emphasis> function in file <emphasis>src/store_log.c</emphasis>: </para><screen><![CDATA[9ld.%03d %-7s %02d %08X %s %4d %9ld %9ld %9ld %s %ld/%ld %s %s]]></screen><orderedlist numeration="arabic"><listitem><para><emphasis role="strong">time</emphasis> The timestamp when the line was logged in UTC with a millisecond fraction. </para></listitem><listitem><para><emphasis role="strong">action</emphasis> The action the object was sumitted to, compare with <emphasis>src/store_log.c</emphasis>: </para><itemizedlist><listitem><para><emphasis role="strong">CREATE</emphasis> Seems to be unused. </para></listitem><listitem><para><emphasis role="strong">RELEASE</emphasis> The object was removed from the cache (see also <emphasis role="strong">file number</emphasis> below). </para></listitem><listitem><para><emphasis role="strong">SWAPOUT</emphasis> The object was saved to disk. </para></listitem><listitem><para><emphasis role="strong">SWAPIN</emphasis> The object existed on disk and was read into memory. </para></listitem></itemizedlist></listitem><listitem><para><emphasis role="strong">dir number</emphasis> The cache_dir number this object was stored into, starting at 0 for your first cache_dir line. </para></listitem><listitem><para><emphasis role="strong">file number</emphasis> The file number for the object storage file. Please note that the path to this file is calculated according to your <emphasis>cache_dir</emphasis> configuration. A file number of <emphasis>FFFFFFFF</emphasis> indicates &quot;memory only&quot; objects. Any action code for such a file number refers to an object which existed only in memory, not on disk.  For instance, if a <emphasis>RELEASE</emphasis> code was logged with file number <emphasis>FFFFFFFF</emphasis>, the object existed only in memory, and was released from memory. </para></listitem><listitem><para><emphasis role="strong">hash</emphasis> The hash value used to index the object in the cache. Squid currently uses MD5 for the hash value. </para></listitem><listitem><para><emphasis role="strong">status</emphasis> The HTTP reply status code. </para></listitem><listitem><para><emphasis role="strong">datehdr</emphasis> The value of the HTTP <emphasis>Date</emphasis> reply header. </para></listitem><listitem><para><emphasis role="strong">lastmod</emphasis> The value of the HTTP <emphasis>Last-Modified</emphasis> reply header. </para></listitem><listitem><para><emphasis role="strong">expires</emphasis> The value of the HTTP &quot;Expires: &quot; reply header. </para></listitem><listitem><para><emphasis role="strong">type</emphasis> The HTTP <emphasis>Content-Type</emphasis> major value, or &quot;unknown&quot; if it cannot be determined. </para></listitem><listitem><para><emphasis role="strong">sizes</emphasis> This column consists of two slash separated fields: </para><itemizedlist><listitem><para>The advertised content length from the HTTP <emphasis>Content-Length</emphasis> reply header. </para></listitem><listitem><para>The size actually read. </para><itemizedlist><listitem override="none"><para>If the advertised (or expected) length is missing, it will be set to zero. If the advertised length is not zero, but not equal to the real length, the object will be released from the cache. </para></listitem></itemizedlist></listitem></itemizedlist></listitem><listitem><para><emphasis role="strong">method</emphasis> The request method for the object, e.g. <emphasis>GET</emphasis>. </para></listitem><listitem><para><emphasis role="strong">key</emphasis> The key to the object, usually the URL. </para><itemizedlist><listitem override="none"><para>The <emphasis role="strong">datehdr</emphasis>, <emphasis role="strong">lastmod</emphasis>, and <emphasis role="strong">expires</emphasis> values are all expressed in UTC seconds. The actual values are parsed from the HTTP reply headers. An unparsable header is represented by a value of -1, and a missing header is represented by a value of -2. </para></listitem></itemizedlist></listitem></orderedlist></section><section><title>swap.state</title><para>This file has a rather unfortunate history which has led to it often being called the <emphasis>swap log</emphasis>.  It is in fact a <emphasis role="strong">journal of the cache index</emphasis> with a record of every cache object written to disk. It is read when Squid starts up to &quot;reload&quot; the cache quickly. </para><para>If you remove this file when squid is <emphasis role="strong">NOT</emphasis> running, you will effectively wipe out your cache index of contents. Squid can rebuild it from the original files, but that procedure can take a long time as every file in the cache must be fully scanned for meta data. </para><para>If you remove this file while squid <emphasis role="strong">IS</emphasis> running, you can easily recreate it.  The safest way is to simply shutdown the running process: </para><screen><![CDATA[% squid -k shutdown]]></screen><para>This will disrupt service, but at least you will have your swap log back. Alternatively, you can tell squid to rotate its log files.  This also causes a clean swap log to be written. </para><screen><![CDATA[% squid -k rotate]]></screen><para>By default the <emphasis>swap.state</emphasis> file is stored in the top-level of each <emphasis>cache_dir</emphasis>.  You can move the logs to a different location with the <emphasis>cache_swap_state</emphasis> option. </para><para>The file is a binary format that includes MD5 checksums, and <emphasis>StoreEntry</emphasis> fields. Please see the Programmers' Guide for information on the contents and format of that file. </para></section><section><title>squid.out</title><para>If you run your Squid from the <emphasis>RunCache</emphasis> script, a file <emphasis>squid.out</emphasis> contains the Squid startup times, and also all fatal errors, e.g. as produced by an <emphasis>assert()</emphasis> failure. If you are not using <emphasis>RunCache</emphasis>, you will not see such a file. </para><itemizedlist><listitem override="none"><para><inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/RunCache#">RunCache</ulink> has been obsoleted since <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-2.6#">Squid-2.6</ulink>. Modern Squid run as daemons usually log this output to the system syslog facility or if run manually to stdout for the account which operates the master daemon process. </para></listitem></itemizedlist></section><section><title>useragent.log</title><itemizedlist><listitem override="none"><para><inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> Starting from <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-3.2#">Squid-3.2</ulink> this log has become one of the default <link linkend="access.log">access.log</link> formats and is always available for use. It is no longer a special separate log file. </para></listitem></itemizedlist><para>The user agent log file is only maintained, if </para><itemizedlist><listitem><para>you configured the compile time <emphasis>--enable-useragent-log</emphasis> option, and </para></listitem><listitem><para>you pointed the <emphasis>useragent_log</emphasis> configuration option to a file. </para></listitem></itemizedlist><para>From the user agent log file you are able to find out about distribution of browsers of your clients. Using this option in conjunction with a loaded production squid might not be the best of all ideas. </para></section></section><section><title>Which log files can I delete safely?</title><para>You should never delete <emphasis>access.log</emphasis>, <emphasis>store.log</emphasis>, or <emphasis>cache.log</emphasis> while Squid is running. With Unix, you can delete a file when a process has the file opened.  However, the filesystem space is not reclaimed until the process closes the file. </para><para>If you accidentally delete <emphasis>swap.state</emphasis> while Squid is running, you can recover it by following the instructions in the previous questions.  If you delete the others while Squid is running, you can not recover them. </para><para>The correct way to maintain your log files is with Squid's &quot;rotate&quot; feature.  You should rotate your log files at least once per day. The current log files are closed and then renamed with numeric extensions (.0, .1, etc).  If you want to, you can write your own scripts to archive or remove the old log files.  If not, Squid will only keep up to <ulink url="http://www.squid-cache.org/Doc/config/logfile_rotate#">logfile_rotate</ulink> versions of each log file. The logfile rotation procedure also writes a clean <emphasis>swap.state</emphasis> file, but it does not leave numbered versions of the old files. </para><para>If you set <ulink url="http://www.squid-cache.org/Doc/config/logfile_rotate#">logfile_rotate</ulink> to 0, Squid simply closes and then re-opens the logs.  This allows third-party logfile management systems, such as <emphasis>newsyslog</emphasis>, to maintain the log files. </para><para>To rotate Squid's logs, simple use this command: </para><screen><![CDATA[squid -k rotate]]></screen><para>For example, use this cron entry to rotate the logs at midnight: </para><screen><![CDATA[0 0 * * * /usr/local/squid/bin/squid -k rotate]]></screen></section><section><title>How can I disable Squid's log files?</title><para>To disable <emphasis>access.log</emphasis>: </para><screen><![CDATA[access_log none]]></screen><para>To disable <emphasis>store.log</emphasis>: </para><screen><![CDATA[cache_store_log none]]></screen><para>To disable <emphasis>cache.log</emphasis>: </para><screen><![CDATA[cache_log /dev/null]]></screen><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/attention.png" width="15"/></imageobject><textobject><phrase>&lt;!&gt;</phrase></textobject></inlinemediaobject> </para></entry><entry colsep="1" rowsep="1"><para>It is a bad idea to disable the <emphasis>cache.log</emphasis> because this file contains many important status and debugging messages.  However, if you really want to, you can </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> </para></entry><entry colsep="1" rowsep="1"><para>If /dev/null is specified to any of the above log files, <ulink url="http://www.squid-cache.org/Doc/config/logfile#">logfile</ulink> rotate MUST also be set to <emphasis>0</emphasis> or else risk Squid rotating away /dev/null making it a plain log file </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> <inlinemediaobject><imageobject><imagedata depth="16" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/icon-info.png" width="16"/></imageobject><textobject><phrase>{i}</phrase></textobject></inlinemediaobject> </para></entry><entry colsep="1" rowsep="1"><para>Instead of disabling the log files, it is advisable to use a smaller value for <ulink url="http://www.squid-cache.org/Doc/config/logfile_rotate#">logfile_rotate</ulink> and properly rotating Squid's log files in your cron. That way, your log files are more controllable and self-maintained by your system </para></entry></row></tbody></tgroup></informaltable></section><section><title>What is the maximum size of access.log?</title><para>Squid does not impose a size limit on its log files.  Some operating systems have a maximum file size limit, however.  If a Squid log file exceeds the operating system's size limit, Squid receives a write error and shuts down.  You should regularly rotate Squid's log files so that they do not become very large. </para><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> </para></entry><entry colsep="1" rowsep="1"><para>Logging is very important to Squid. In fact, it is so important that it will shut itself down if it can't write to its logfiles. This includes cases such as a full log disk, or logfiles getting too big. </para></entry></row></tbody></tgroup></informaltable></section><section><title>My log files get very big!</title><para>You need to <emphasis>rotate</emphasis> your log files with a cron job.  For example: </para><screen><![CDATA[0 0 * * * /usr/local/squid/bin/squid -k rotate]]></screen><para>When logging debug information into cache.log it can easily become extremely large and when a long access.log traffic history is required (ie by law in some countries) storing large cache.log for that time is not reasonable. From <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-3.2#">Squid-3.2</ulink> cache.log can be rotated with an individual cap set by <ulink url="http://www.squid-cache.org/Doc/config/debug_options#">debug_options</ulink> <!--transclusion is not implemented in DocBook formatter-->rotate=N<!--transclusion is not implemented in DocBook formatter-->} option to store fewer of these large files in the .0 to .N series of backups. The default is to store the same number as with access.log and set in the <ulink url="http://www.squid-cache.org/Doc/config/logfile_rotate#">logfile_rotate</ulink> directive. </para></section><section><title>I want to use another tool to maintain the log files.</title><para>If you set <ulink url="http://www.squid-cache.org/Doc/config/logfile_rotate#">logfile_rotate</ulink> to 0, Squid simply closes and then re-opens the logs.  This allows third-party logfile management systems, such as <ulink url="http://www.weird.com/~woods/projects/newsyslog.html">newsyslog</ulink> or <emphasis>logrotate</emphasis>, to maintain the log files. </para><para><ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-2.7#">Squid-2.7</ulink> and <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-3.2#">Squid-3.2</ulink> and later also provide modular logging outputs which provide flexibility for sending log data to alternative logging systems. </para></section><section><title>Managing log files</title><para>The preferred log file for analysis is the <emphasis>access.log</emphasis> file in native format. For long term evaluations, the log file should be obtained at regular intervals. Squid offers an easy to use API for rotating log files, in order that they may be moved (or removed) without disturbing the cache operations in progress. The procedures were described above. </para><para>Depending on the disk space allocated for log file storage, it is recommended to set up a cron job which rotates the log files every 24, 12, or 8 hour. You will need to set your <ulink url="http://www.squid-cache.org/Doc/config/logfile_rotate#">logfile_rotate</ulink> to a sufficiently large number. During a time of some idleness, you can safely transfer the log files to your analysis host in one burst. </para><para>Before transport, the log files can be compressed during off-peak time. On the analysis host, the log file are concatenated into one file, so one file for 24 hours is the yield. Also note that with <ulink url="http://www.squid-cache.org/Doc/config/log_icp_queries#">log_icp_queries</ulink> enabled, you might have around 1 GB of uncompressed log information per day and busy cache. Look into you cache manager info page to make an educated guess on the size of your log files. </para><para>The EU project <ulink url="http://www.desire.org/">DESIRE</ulink> developed some <ulink url="http://www.uninett.no/prosjekt/desire/arneberg/statistics.html">some basic rules</ulink> to obey when handling and processing log files: </para><itemizedlist><listitem><para>Respect the privacy of your clients when publishing results. </para></listitem><listitem><para>Keep logs unavailable unless anonymized. Most countries have laws on privacy protection, and some even on how long you are legally allowed to keep certain kinds of information. </para></listitem><listitem><para>Rotate and process log files at least once a day. Even if you don't process the log files, they will grow quite large, see <emphasis>My log files get very big</emphasis> above here. If you rely on processing the log files, reserve a large enough partition solely for log files. </para></listitem><listitem><para>Keep the size in mind when processing. It might take longer to process log files than to generate them! </para></listitem><listitem><para>Limit yourself to the numbers you are interested in. There is data beyond your dreams available in your log file, some quite obvious, others by combination of different views. Here are some examples for figures to watch: </para><itemizedlist><listitem><para>The hosts using your cache. </para></listitem><listitem><para>The elapsed time for HTTP requests - this is the latency the user sees. Usually, you will want to make a distinction for HITs and MISSes and overall times. Also, medians are preferred over averages. </para></listitem><listitem><para>The requests handled per interval (e.g. second, minute or hour). </para></listitem></itemizedlist></listitem></itemizedlist></section><section><title>Why do I get ERR_NO_CLIENTS_BIG_OBJ messages so often?</title><para>This message means that the requested object was in &quot;Delete Behind&quot; mode and the user aborted the transfer.  An object will go into &quot;Delete Behind&quot; mode if </para><itemizedlist><listitem><para>It is larger than <emphasis>maximum_object_size</emphasis> </para></listitem><listitem><para>It is being fetched from a neighbor which has the <emphasis>proxy-only</emphasis> option set. </para></listitem></itemizedlist></section><section><title>What does ERR_LIFETIME_EXP mean?</title><para>This means that a timeout occurred while the object was being transferred.  Most likely the retrieval of this object was very slow (or it stalled before finishing) and the user aborted the request.  However, depending on your settings for <emphasis>quick_abort</emphasis>, Squid may have continued to try retrieving the object. Squid imposes a maximum amount of time on all open sockets, so after some amount of time the stalled request was aborted and logged win an ERR_LIFETIME_EXP message. </para></section><section><title>Retrieving &quot;lost&quot; files from the cache</title><para>&quot;I've been asked to retrieve an object which was accidentally destroyed at the source for recovery. So, how do I figure out where the things are so I can copy them out and strip off the headers?&quot;&quot; </para><para>The following method applies only to the Squid-1.1 versions: </para><para>Use <emphasis>grep</emphasis> to find the named object (URL) in the <emphasis>cache.log</emphasis> file.  The first field in this file is an integer <emphasis>file number</emphasis>. </para><para>Then, find the file <emphasis>fileno-to-pathname.pl</emphasis> from the &quot;scripts&quot; directory of the Squid source distribution.  The usage is </para><screen><![CDATA[perl fileno-to-pathname.pl [-c squid.conf]]]></screen><para>file numbers are read on stdin, and pathnames are printed on stdout. </para></section><section><title>Can I use store.log to figure out if a response was cachable?</title><para>Sort of.  You can use <emphasis>store.log</emphasis> to find out if a particular response was <emphasis>cached</emphasis>. </para><para>Cached responses are logged with the SWAPOUT tag. Uncached responses are logged with the RELEASE tag. </para><para>However, your analysis must also consider that when a cached response is removed from the cache (for example due to cache replacement) it is also logged in <emphasis>store.log</emphasis> with the RELEASE tag.  To differentiate these two, you can look at the filenumber (3rd) field.  When an uncachable response is released, the filenumber is FFFFFFFF (-1).  Any other filenumber indicates a cached response was released. </para></section><section><title>Can I pump the squid access.log directly into a pipe?</title><para>Several people have asked for this, usually to feed the log into some kind of external database, or to analyze them in real-time. </para><para>The answer is No. Well, yes, sorta. Using a pipe directly opens up a whole load of possible problems. </para><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> </para></entry><entry colsep="1" rowsep="1"><para>Logging is very important to Squid. In fact, it is so important that it will shut itself down if it can't write to its logfiles. </para></entry></row></tbody></tgroup></informaltable><para>There are several alternatives which are much safer to setup and use. The basic capabilities present are : </para><para>since <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-2.6#">Squid-2.6</ulink>: </para><itemizedlist><listitem><para>logging to system syslog </para></listitem></itemizedlist><para>since <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-2.7#">Squid-2.7</ulink>: </para><itemizedlist><listitem><para>logging to an external service via UDP packets </para></listitem><listitem><para>logging through IPC to a custom local daemon </para></listitem></itemizedlist><para>since <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Squid-3.2#">Squid-3.2</ulink>: </para><itemizedlist><listitem><para>logging to an external service via TCP streams </para></listitem></itemizedlist><para>See the <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/Features/LogModules#">Log Modules feature</ulink> for technical details on setting up a daemon or other output modules. </para><!--rule (<hr>) is not applicable to DocBook--><para> Back to the <ulink url="https://wiki.squid-cache.org/SquidFaq/SquidLogs/SquidFaq#">SquidFaq</ulink> </para></section></article>