<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>Squid-5</title><revhistory><revision><revnumber>9</revnumber><date>2021-07-31 01:00:40</date><authorinitials>AmosJeffries</authorinitials><revremark>5.1 released</revremark></revision><revision><revnumber>8</revnumber><date>2020-01-20 05:10:26</date><authorinitials>AmosJeffries</authorinitials><revremark>Copy merge and release policy details from RoadMap</revremark></revision><revision><revnumber>7</revnumber><date>2020-01-20 05:03:35</date><authorinitials>AmosJeffries</authorinitials><revremark>add default config, copy of v4 one</revremark></revision><revision><revnumber>6</revnumber><date>2020-01-20 05:01:46</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>5</revnumber><date>2019-09-05 10:26:34</date><authorinitials>AmosJeffries</authorinitials><revremark>update with changesets detail for pre-branching review</revremark></revision><revision><revnumber>4</revnumber><date>2019-01-27 06:00:39</date><authorinitials>AmosJeffries</authorinitials><revremark>status update as at Jan 2019</revremark></revision><revision><revnumber>3</revnumber><date>2018-02-27 03:17:35</date><authorinitials>AmosJeffries</authorinitials><revremark>better major bug listing accuracy</revremark></revision><revision><revnumber>2</revnumber><date>2016-11-15 07:02:36</date><authorinitials>AmosJeffries</authorinitials><revremark>update with ICAP trailers feature</revremark></revision><revision><revnumber>1</revnumber><date>2015-10-14 06:17:51</date><authorinitials>AmosJeffries</authorinitials></revision></revhistory></articleinfo><section><title>Squid 5</title><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> Aug 2021 </para></entry><entry colsep="1" rowsep="1"><para> Released for production use. </para></entry></row></tbody></tgroup></informaltable><para>The features have been set and large code changes are reserved for later versions. </para><para>Additions are limited to: </para><itemizedlist><listitem><para>Security fixes </para></listitem><listitem><para>Serious Bug fixes </para></listitem><listitem><para>Documentation updates </para></listitem></itemizedlist><para>Features ported from 2.7 in this release: </para><itemizedlist><listitem><para>Class 6 (client response) delay pool </para><itemizedlist><listitem override="none"><para>- In the form of <ulink url="http://www.squid-cache.org/Doc/config/response_delay_pool#">response_delay_pool</ulink> and <ulink url="http://www.squid-cache.org/Doc/config/response_delay_pool_access#">response_delay_pool_access</ulink> for Squid-to-client speed limiting. </para></listitem></itemizedlist></listitem></itemizedlist><para>Basic new features in 5.1: </para><itemizedlist><listitem><para><emphasis role="strong">Major UI changes:</emphasis> </para><itemizedlist><listitem><para>Happy Eyeballs: Use each fully resolved forwarding destination ASAP. </para><itemizedlist><listitem override="none"><para>- Removes <ulink url="http://www.squid-cache.org/Doc/config/dns_v4_first#">dns_v4_first</ulink> feature as a side effect. </para></listitem></itemizedlist></listitem><listitem><para>Reuse reserved Negotiate and NTLM helpers after an idle timeout. </para></listitem><listitem><para>Support logformat %codes in error page templates. </para></listitem><listitem><para>Support opening CONNECT tunnels through an HTTP cache peer. </para></listitem><listitem><para>Change annotation behaviour when multiple same-name annotations are received. (see bug <ulink url="https://bugs.squid-cache.org/show_bug.cgi?id=4912#">4912</ulink>) </para><itemizedlist><listitem override="none"><para>- Some reserved keys retain the old behaviour due to their usage (eg group= received from auth and external ACL helpers) </para></listitem></itemizedlist></listitem></itemizedlist></listitem><listitem><para><emphasis role="strong">Minor UI changes:</emphasis> </para><itemizedlist><listitem><para>Add <ulink url="http://www.squid-cache.org/Doc/config/auth_schemes#">auth_schemes</ulink> to control schemes presence and order in 401s/407s. </para></listitem><listitem><para>Add ACL types annotate_transaction and annotate_client. </para></listitem><listitem><para>Make CONNECT ACL a built-in default. </para></listitem><listitem><para>Add <ulink url="http://www.squid-cache.org/Doc/config/collapsed_forwarding_access#">collapsed_forwarding_access</ulink> to restrict Collapsed Forwarding of HTTP, ICP and HTCP requests. </para></listitem><listitem><para>Add <ulink url="http://www.squid-cache.org/Doc/config/mark_client_connection#">mark_client_connection</ulink> and <ulink url="http://www.squid-cache.org/Doc/config/mark_client_packet#">mark_client_packet</ulink> directives for Netfilter MARK and CONNMARK control. </para></listitem><listitem><para>Add <ulink url="http://www.squid-cache.org/Doc/config/deny_info#">deny_info</ulink> and error page <emphasis role="strong">%A</emphasis> code to display Squid listening IP address. </para></listitem><listitem><para>New %ssl::&lt;<!--RAW HTML: &lt;-->cert macro code to display received server X.509 certificate in PEM format. </para></listitem><listitem><para>New %proxy_protocol::&gt;<!--RAW HTML: &gt;-->h logformat code for logging received PROXY protocol TLV values. </para></listitem></itemizedlist></listitem><listitem><para><emphasis role="strong">Developer Interest changes:</emphasis> </para><itemizedlist><listitem><para><ulink url="https://datatracker.ietf.org/doc/draft-rousskov-icap-trailers/">ICAP Trailers</ulink>. </para></listitem><listitem><para>Remove USE_CHUNKEDMEMPOOLS compiler flag. </para></listitem><listitem><para>All binaries now use standard EXIT_SUCCESS or EXIT_FAILURE termination results for better OS integration. </para></listitem><listitem><para>Migrated to TrivialDB from deprecated BerkleyDB versions. </para></listitem><listitem><para>ntlm_fake_auth: add ability to test delayed responses. </para></listitem><listitem><para>basic_ldap_auth: return BH on internal errors. </para></listitem><listitem><para>Support RFC 8586: Loop Detection in Content Delivery Networks </para></listitem></itemizedlist></listitem></itemizedlist><para>Packages of what will become Squid-5 source code are available at <ulink url="http://www.squid-cache.org/Versions/v5/"/> </para><section><title>Security Advisories</title><para>See our <ulink url="http://www.squid-cache.org/Advisories/">Advisories</ulink> list. </para></section><section><title>Open Bugs</title><itemizedlist><listitem override="none"><para><ulink url="http://bugs.squid-cache.org/buglist.cgi?bug_id_type=anyexact&amp;bug_severity=blocker&amp;bug_severity=critical&amp;bug_severity=major&amp;bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;chfieldto=Now&amp;product=Squid&amp;query_format=advanced&amp;columnlist=bug_severity%2Cversion%2Cop_sys%2Cshort_desc&amp;order=version%20DESC%2Cbug_severity%2Cbug_id&amp;o2=equals&amp;v2=unspecified&amp;f1=version&amp;o1=lessthaneq&amp;v1=5">Major or higher bugs currently affecting this version</ulink>. </para><itemizedlist><listitem><para>Bugs against any older version can be closed if found fixed in 5.x </para></listitem><listitem><para>Bugs inherited from older versions are not necessarily blockers on stable. </para></listitem></itemizedlist></listitem></itemizedlist><itemizedlist><listitem override="none"><para><ulink url="http://bugs.squid-cache.org/buglist.cgi?query_format=advanced&amp;product=Squid&amp;version=5&amp;bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;bug_severity=blocker&amp;bug_severity=critical&amp;bug_severity=major&amp;bug_severity=normal&amp;bug_severity=minor&amp;emailtype1=substring&amp;email1=&amp;emailtype2=substring&amp;email2=&amp;bugidtype=include&amp;columnlist=bug_severity%2Cversion%2Cop_sys%2Cshort_desc&amp;list_id=917&amp;order=version DESC%2Cbug_severity%2Cbug_id">Bugs new in this version</ulink> </para></listitem></itemizedlist></section><section><title>Squid-5 default config</title><screen><![CDATA[http_port 3128
]]><![CDATA[
# Example rule allowing access from your local networks.
# Adapt to list your (internal) IP networks from where browsing
# should be allowed
acl localnet src 0.0.0.1-0.255.255.255  # RFC 1122 "this" network (LAN)
acl localnet src 10.0.0.0/8             # RFC 1918 local private network (LAN)
acl localnet src 100.64.0.0/10          # RFC 6598 shared address space (CGN)
acl localnet src 169.254.0.0/16         # RFC 3927 link-local (directly plugged) machines
acl localnet src 172.16.0.0/12          # RFC 1918 local private network (LAN)
acl localnet src 192.168.0.0/16         # RFC 1918 local private network (LAN)
acl localnet src fc00::/7               # RFC 4193 local private network range
acl localnet src fe80::/10              # RFC 4291 link-local (directly plugged) machines
]]><![CDATA[
acl SSL_ports port 443
acl Safe_ports port 80          # http
acl Safe_ports port 21          # ftp
acl Safe_ports port 443         # https
acl Safe_ports port 70          # gopher
acl Safe_ports port 210         # wais
acl Safe_ports port 1025-65535  # unregistered ports
acl Safe_ports port 280         # http-mgmt
acl Safe_ports port 488         # gss-http
acl Safe_ports port 591         # filemaker
acl Safe_ports port 777         # multiling http
]]><![CDATA[
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow localhost manager
http_access deny manager
]]><![CDATA[
#
# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS
#
]]><![CDATA[
http_access allow localnet
http_access allow localhost
http_access deny all
]]><![CDATA[
coredump_dir /squid/var/cache/squid
]]><![CDATA[
refresh_pattern ^ftp:           1440    20%     10080
refresh_pattern ^gopher:        1440    0%      1440
refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
refresh_pattern .               0       20%     4320]]></screen></section></section></article>