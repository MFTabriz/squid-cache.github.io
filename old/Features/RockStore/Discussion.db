<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>Features/RockStore/Discussion</title><revhistory><revision><revnumber>1</revnumber><date>2009-04-24 08:19:33</date><authorinitials>AmosJeffries</authorinitials><revremark>store rebuild issues of note</revremark></revision></revhistory></articleinfo><para>See <ulink url="https://wiki.squid-cache.org/Features/RockStore/Discussion/Features/RockStore#">Discussed Page</ulink> </para><!--rule (<hr>) is not applicable to DocBook--><para> <anchor id="C1"/> </para><para>Several bugs and issues have come into view when using RAM-only and COSS Squid that are relevant to this. </para><para>Most of it is related to the way storage rebuild currently depends on a global store_rebuilding flag to allow other things in Squid to proceed. </para><para>The first issue is showing all signs of this rebuild flag not even working, first storage _type_ to complete rebuild unsets it regardless of other types being incomplete (COSS vs AUFS reload races; COSS looses on high-end boxes). </para><para>Several of those things waiting for a rebuild only need _a_ cache for objects to start running. The RAM-cache would be completely sufficient for the first few minutes while disk storage indexes get loaded. </para><para><ulink url="https://wiki.squid-cache.org/Features/RockStore/Discussion/AmosJeffries#">AmosJeffries</ulink> 2009-04-24 </para><!--rule (<hr>) is not applicable to DocBook--></article>