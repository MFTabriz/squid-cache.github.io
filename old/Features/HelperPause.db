<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>Features/HelperPause</title><revhistory><revision><revnumber>7</revnumber><date>2009-12-16 04:34:58</date><authorinitials>AmosJeffries</authorinitials><revremark>things are both worse and better for this feature</revremark></revision><revision><revnumber>6</revnumber><date>2008-09-18 11:45:06</date><authorinitials>AmosJeffries</authorinitials><revremark>update to get on auto-lists</revremark></revision><revision><revnumber>5</revnumber><date>2008-05-18 19:38:58</date><authorinitials>localhost</authorinitials><revremark>converted to 1.6 markup</revremark></revision><revision><revnumber>4</revnumber><date>2008-03-24 21:16:52</date><authorinitials>AlexRousskov</authorinitials><revremark>Removed means from the goal</revremark></revision><revision><revnumber>3</revnumber><date>2008-03-24 21:14:47</date><authorinitials>AlexRousskov</authorinitials><revremark>Added a couple of alternative designs.</revremark></revision><revision><revnumber>2</revnumber><date>2008-03-22 06:56:57</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>1</revnumber><date>2008-03-22 06:55:12</date><authorinitials>AmosJeffries</authorinitials></revision></revhistory></articleinfo><section><title>Feature: Helper Pause State</title><itemizedlist><listitem><para><emphasis role="strong">Goal</emphasis>: Skip busy helpers without delays. </para></listitem><listitem><para><emphasis role="strong">Status</emphasis>: Not Started. </para></listitem><listitem><para><emphasis role="strong">ETA</emphasis>: unknown </para></listitem><listitem><para><emphasis role="strong">Version</emphasis>: Squid 3 </para></listitem><listitem><para><emphasis role="strong">Developer</emphasis>: </para></listitem></itemizedlist><section><title>Details</title><para><emphasis>Chris Woodfield</emphasis>: Allow helper children (url_rewriters, etc) to send some sort of  &quot;pause&quot; message back to squid to signal that that child is temporarily  unavailable for new queries, and then a &quot;ready&quot; message when it's  available again. (yes, this is kinda obscure - the issue here is a single-threaded  rewriter helper app that occasionally has to re-read its rules database,  and can't answer queries while it's doing so) </para><para>It is not clear whether expanding redirector API is the right direction. It could be argued that folks that need non-basic adaptors should use ICAP or eCAP instead because those feature-rich interfaces are designed to handle complex scheduling and error bypass better. </para><para>A yet another alternative is to convert redirectors to use *CAP-like internal API so that they can benefit from common adaptation code and so that we do not have to support too many complex ways of adapting traffic. </para><para>Please discuss these issues before starting development. </para><section><title>UPDATE: This issue has been further complicated.</title><para>There was a 'busy' state in the stateful helpers previously to indicate a similar waiting. This was found to accumulate far too many helpers at periods and block up the total load Squid could handle. It has now been dropped from 3.1 to resolve those issues. </para></section><section><title>UPDATE: There is now an alternative to pausing</title><para>The on-demand starting of new helpers from 3.2 can be leveraged to do this in a far simpler design. By having helpers simply stop running when their config becomes old. Squid will start new helpers as load requires and helpers only need load config on startup. </para><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/Features/HelperPause/CategoryFeature#">CategoryFeature</ulink> <ulink url="https://wiki.squid-cache.org/Features/HelperPause/CategoryWish#">CategoryWish</ulink> </para></section></section></section></article>