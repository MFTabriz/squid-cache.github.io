<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>Features/TCPAccess</title><revhistory><revision><revnumber>4</revnumber><date>2009-03-08 09:56:56</date><authorinitials>AmosJeffries</authorinitials><revremark>remove text from developer field, so this shows up on the wishlist</revremark></revision><revision><revnumber>3</revnumber><date>2008-11-02 21:57:37</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>2</revnumber><date>2008-11-02 21:56:19</date><authorinitials>FrancescoChemolli</authorinitials><revremark>Added link to Discussion</revremark></revision><revision><revnumber>1</revnumber><date>2008-11-02 20:33:38</date><authorinitials>Henrik Nordstr√∂m</authorinitials></revision></revhistory></articleinfo><section><title>Feature: Early access control knob to block connection floods</title><itemizedlist><listitem><para><emphasis role="strong">Goal</emphasis>: A new access directive executed immediately after accepting a connection, before reading the request, allowing unwanted or malicious clients do be dropped as soon as possible without tying up connection resources. </para></listitem><listitem><para><emphasis role="strong">Status</emphasis>: <emphasis>Not started</emphasis> </para></listitem></itemizedlist><itemizedlist><listitem><para><emphasis role="strong">ETA</emphasis>: one day at most </para></listitem><listitem><para><emphasis role="strong">Version</emphasis>: None assigned </para></listitem><listitem><para><emphasis role="strong">Priority</emphasis>: None assigned </para></listitem><listitem><para><emphasis role="strong">Developer</emphasis>:  </para></listitem><listitem><para><emphasis role="strong">More</emphasis>:  </para></listitem></itemizedlist></section><section><title>Details</title><para>This is a proposal for a new tcp_access directive, to be executed immediately when a new connection is accepted, before reading any HTPT request. As no HTTP data is yet available it's limited to src, myport, myaddr, time and maxconn type acls, maybe one or two more. </para><para>Should probably reset the connection by default rather than sending av HTTP error, but that's subjective. Some may prefer an error page.. </para><para>This can be thougt of as application level firewalling of the proxy service. </para><para>Needs to be a &quot;slow/async&quot; acl match like http_access so external acls may be plugged in for extra functionality such as integration with packet level firewalls, cluster wide connection accounting etc. </para><!--rule (<hr>) is not applicable to DocBook--><section><title>Discussion</title><para>To answer, use the &quot;Discussion&quot; link in the main menu </para><para>See <ulink url="https://wiki.squid-cache.org/Features/TCPAccess/Features/TCPAccess#">Discussed Page</ulink> </para><!--rule (<hr>) is not applicable to DocBook--><para> <anchor id="C1"/> Nice!. I suggest adding dst and port directives, which are quite useless in forward proxy scenarios, but could be useful in transaprent and reverse proxy setups. </para><para>-- <ulink url="https://wiki.squid-cache.org/Features/TCPAccess/FrancescoChemolli#">FrancescoChemolli</ulink> <!--The macro DateTime caused an error and should be blacklisted. It returned the data '2008-11-02 20:45:51' which caused the docbook-formatter to choke. Please file a bug.--> </para><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/Features/TCPAccess/CategoryFeature#">CategoryFeature</ulink> </para></section></section></article>