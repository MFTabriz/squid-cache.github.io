<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>Features/ActAsOrigin</title><revhistory><revision><revnumber>2</revnumber><date>2016-01-28 05:38:01</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>1</revnumber><date>2011-07-14 03:00:02</date><authorinitials>AmosJeffries</authorinitials><revremark>document this portage effort</revremark></revision></revhistory></articleinfo><section><title>Feature: act-as-origin option for reverse proxies</title><itemizedlist><listitem><para><emphasis role="strong">Goal</emphasis>: porting and extending the act-as-origin flag from <ulink url="https://wiki.squid-cache.org/Features/ActAsOrigin/Squid-2.7#">Squid-2.7</ulink> </para></listitem></itemizedlist><itemizedlist><listitem><para><emphasis role="strong">Status</emphasis>: Not started; Planning changes. </para></listitem></itemizedlist><itemizedlist><listitem><para><emphasis role="strong">ETA</emphasis>: <emphasis>unknown</emphasis> </para></listitem><listitem><para><emphasis role="strong">Version</emphasis>: 2.7, 3.2 </para></listitem><listitem><para><emphasis role="strong">Developer</emphasis>:<ulink url="https://wiki.squid-cache.org/Features/ActAsOrigin/AmosJeffries#">AmosJeffries</ulink>, <ulink url="https://wiki.squid-cache.org/Features/ActAsOrigin/HenrikNordstrom#">HenrikNordstrom</ulink> </para></listitem><listitem><para><emphasis role="strong">More</emphasis>: </para><itemizedlist><listitem override="none"><para><ulink url="http://www.squid-cache.org/~amosjeffries/patches/act-as-origin.patch"/> (initial portage, may not work) </para></listitem></itemizedlist></listitem></itemizedlist></section><section><title>Details</title><para>This option makes Squid perform additional filtering of the HTTP reply headers as if it was an origin. We can use this to fix many problems with broken web servers responses. However it will add a performance loss as that processing and changing is performed. </para><para>This option is only <emphasis>right</emphasis> for use in reverse-proxy mode and on replies. It is not for requests or regular traffic alterations. Although the HTTP problems fixed may be valid and useful in any traffic. </para><para><ulink url="https://wiki.squid-cache.org/Features/ActAsOrigin/Squid-2.7#">Squid-2.7</ulink> only provides these operations: </para><itemizedlist><listitem><para>replace Date: header with current timestamp. Fixes origin problems with clockless response, NTP sync errors, local-time configuration, or server-side cache age. </para></listitem><listitem><para>replace Expires: header to synchronize with Date: header. Fixing problems with centuries-old expiry, invalid formats, or invalid values. </para></listitem></itemizedlist><para><ulink url="https://wiki.squid-cache.org/Features/ActAsOrigin/Squid-3.1#">Squid-3.1</ulink> only provides these operations: </para><itemizedlist><listitem><para>synthesize Date: header when missing (on all traffic). </para></listitem></itemizedlist><para><ulink url="https://wiki.squid-cache.org/Features/ActAsOrigin/Squid-3.2#">Squid-3.2</ulink> port combines all of the above and has a few extensions planned: </para><itemizedlist><listitem><para>Sync Expires: value to match Date: and Cache-Control: max-age. Fixes HTTP/1.0 vs HTTP/1.1 caching behaviour differences. </para></listitem><listitem><para>Fix common invalid uses of IE-only cache-control extensions precache and postcache. </para></listitem><listitem><para>Strip &quot;Pragma: no-cache&quot; on replies </para></listitem><listitem><para>Strip invalid uses of Cache-Control: public </para></listitem></itemizedlist><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/Features/ActAsOrigin/CategoryFeature#">CategoryFeature</ulink> </para></section></article>