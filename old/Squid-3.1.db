<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>Squid-3.1</title><revhistory><revision><revnumber>15</revnumber><date>2015-02-02 16:04:01</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>14</revnumber><date>2014-02-13 21:20:48</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>13</revnumber><date>2014-02-13 21:20:27</date><authorinitials>AmosJeffries</authorinitials><revremark>shuffle default config example from FAQ</revremark></revision><revision><revnumber>12</revnumber><date>2012-10-06 05:34:46</date><authorinitials>AmosJeffries</authorinitials><revremark>3.1 is deprecated now.</revremark></revision><revision><revnumber>11</revnumber><date>2011-08-14 21:55:23</date><authorinitials>AmosJeffries</authorinitials><revremark>tweaks</revremark></revision><revision><revnumber>10</revnumber><date>2011-08-14 21:48:18</date><authorinitials>AmosJeffries</authorinitials><revremark>move from roadmap</revremark></revision><revision><revnumber>9</revnumber><date>2008-05-18 19:39:00</date><authorinitials>localhost</authorinitials><revremark>converted to 1.6 markup</revremark></revision><revision><revnumber>8</revnumber><date>2007-10-08 23:08:16</date><authorinitials>AlexRousskov</authorinitials><revremark>Redirected to the primary Squid3 page.</revremark></revision><revision><revnumber>7</revnumber><date>2007-06-21 22:38:35</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>6</revnumber><date>2007-06-21 22:37:59</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>5</revnumber><date>2007-05-17 10:57:53</date><authorinitials>AdrianChadd</authorinitials></revision><revision><revnumber>4</revnumber><date>2007-05-17 09:54:53</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>3</revnumber><date>2007-05-17 09:53:49</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>2</revnumber><date>2007-05-17 09:39:35</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>1</revnumber><date>2007-05-17 09:38:14</date><authorinitials>AmosJeffries</authorinitials></revision></revhistory></articleinfo><section><title>Squid 3.1</title><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> today </para></entry><entry colsep="1" rowsep="1"><para> Squid-3.1 is <emphasis role="strong">CONSIDERED DANGEROUS</emphasis> as the security people say. Due to unfixed vulnerabilities <emphasis role="strong"> <ulink url="http://www.squid-cache.org/Advisories/SQUID-2014_4.txt">CVE-2014-7141</ulink>, <ulink url="http://www.squid-cache.org/Advisories/SQUID-2014_4.txt">CVE-2014-7142</ulink>, <ulink url="http://www.squid-cache.org/Advisories/SQUID-2014_3.txt">CVE-2014-6270</ulink>, <ulink url="http://www.squid-cache.org/Advisories/SQUID-2014_2.txt">CVE-2014-3609</ulink>, <ulink url="http://www.squid-cache.org/Advisories/SQUID-2014_1.txt">CVE-2014-0128</ulink>, <ulink url="http://www.squid-cache.org/Advisories/SQUID-2011_1.txt">CVE-2009-0801</ulink> </emphasis> and any other recently discovered issues. </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> Aug 2012 </para></entry><entry colsep="1" rowsep="1"><para> the Squid-3.1 series became <emphasis role="strong">DEPRECATED</emphasis> with the release of <ulink url="https://wiki.squid-cache.org/Squid-3.1/Squid-3.2#">Squid-3.2</ulink> series </para></entry></row><row rowsep="1"><entry colsep="1" rowsep="1"><para> Mar 2010 </para></entry><entry colsep="1" rowsep="1"><para> Released for production use. </para></entry></row></tbody></tgroup></informaltable><para>The features have been set and code changes are reserved for later versions. Additions are limited to <emphasis role="strong">Security and Bug fixes</emphasis> </para><para>Basic new features in 3.1: </para><itemizedlist><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/ConnPin#">Connection Pinning (for NTLM Auth Passthrough)</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/IPv6#">Native IPv6</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/QualityOfService#">Quality of Service (QoS) Flow support</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/RemoveNullStore#">Native Memory Cache</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/SslBump#">SSL Bump (for HTTPS Filtering and Adaptation)</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/Tproxy4#">TProxy v4.1+ support</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/eCAP#">eCAP Adaptation Module support</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Translations#">Error Page Localization</ulink> </para></listitem><listitem><para>Follow X-Forwarded-For support </para></listitem><listitem><para>X-Forwarded-For options extended (truncate, delete, transparent) </para></listitem><listitem><para>Peer-Name ACL </para></listitem><listitem><para>Reply headers to external ACL. </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/AdaptationLog#">ICAP and eCAP Logging</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/AdaptationChain#">ICAP Service Sets and Chains</ulink> </para></listitem><listitem><para>ICY (SHOUTcast) streaming protocol support </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/HTTP11#">HTTP/1.1 support on connections to web servers and peers.</ulink> </para></listitem></itemizedlist><para>From 3.1.9 </para><itemizedlist><listitem><para>Solaris /dev/poll support </para></listitem></itemizedlist><para>From 3.1.13 </para><itemizedlist><listitem><para><ulink url="https://wiki.squid-cache.org/Squid-3.1/Features/DynamicSslCert#">HTTPS man-in-middle certificate generation</ulink> </para></listitem></itemizedlist><para>Packages of squid 3.1 source code are available at <ulink url="http://www.squid-cache.org/Versions/v3/3.1/"/> </para><section><title>Security Advisories</title><para>See our <ulink url="http://www.squid-cache.org/Advisories/">Advisories</ulink> list. </para></section><section><title>Open Bugs</title><itemizedlist><listitem><para><ulink url="http://bugs.squid-cache.org/buglist.cgi?query_format=advanced&amp;product=Squid&amp;product=Website&amp;target_milestone=3.0&amp;target_milestone=3.1&amp;bug_status=UNCONFIRMED&amp;bug_status=NEW&amp;bug_status=ASSIGNED&amp;bug_status=REOPENED&amp;bug_severity=blocker&amp;bug_severity=critical&amp;bug_severity=major&amp;bug_severity=normal&amp;emailtype1=substring&amp;email1=&amp;emailtype2=substring&amp;email2=&amp;bugidtype=include&amp;order=bugs.bug_severity%2Cbugs.bug_id&amp;chfieldto=Now&amp;cmdtype=doit">Bug Zapping</ulink> </para></listitem></itemizedlist></section><section><title>Squid-3.1 default config</title><para>From 3.1 a lot of configuration cleanups have been done to make things easier. </para><itemizedlist><listitem override="none"><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> </para></entry><entry colsep="1" rowsep="1"><para> This minimal configuration does not work with versions earlier than 3.1 which are missing special cleanup done to the code. </para></entry></row></tbody></tgroup></informaltable></listitem></itemizedlist><screen><![CDATA[http_port 3128
]]><![CDATA[
refresh_pattern ^ftp:           1440    20%     10080
refresh_pattern ^gopher:        1440    0%      1440
refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
refresh_pattern .               0       20%     4320
]]><![CDATA[
acl manager url_regex -i ^cache_object:// +i ^https?://[^/]+/squid-internal-mgr/
]]><![CDATA[
acl localhost src 127.0.0.1/32 ::1
acl to_localhost dst 127.0.0.0/8 0.0.0.0/32 ::1
]]><![CDATA[
acl localnet src 10.0.0.0/8     # RFC 1918 possible internal network
acl localnet src 172.16.0.0/12  # RFC 1918 possible internal network
acl localnet src 192.168.0.0/16 # RFC 1918 possible internal network
acl localnet src fc00::/7       # RFC 4193 local private network range
acl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines
]]><![CDATA[
acl SSL_ports port 443
acl Safe_ports port 80          # http
acl Safe_ports port 21          # ftp
acl Safe_ports port 443         # https
acl Safe_ports port 70          # gopher
acl Safe_ports port 210         # wais
acl Safe_ports port 1025-65535  # unregistered ports
acl Safe_ports port 280         # http-mgmt
acl Safe_ports port 488         # gss-http
acl Safe_ports port 591         # filemaker
acl Safe_ports port 777         # multiling http
acl CONNECT method CONNECT
]]><![CDATA[
http_access allow manager localhost
http_access deny manager
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow localhost
http_access allow localnet
http_access deny all]]></screen></section></section></article>