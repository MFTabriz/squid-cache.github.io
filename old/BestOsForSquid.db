<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>BestOsForSquid</title><revhistory><revision><revnumber>19</revnumber><date>2021-11-07 13:16:51</date><authorinitials>FrancescoChemolli</authorinitials><revremark>mark updated</revremark></revision><revision><revnumber>18</revnumber><date>2021-06-21 21:21:36</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>17</revnumber><date>2021-06-21 21:19:27</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>16</revnumber><date>2021-06-20 17:18:40</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>15</revnumber><date>2020-04-04 20:14:16</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>14</revnumber><date>2016-09-29 13:43:01</date><authorinitials>YuriVoinov</authorinitials></revision><revision><revnumber>13</revnumber><date>2015-09-01 08:30:30</date><authorinitials>AmosJeffries</authorinitials><revremark>add some more tuning relevant details that come up a lot, and mention ZFS bug</revremark></revision><revision><revnumber>12</revnumber><date>2011-06-05 10:26:49</date><authorinitials>AmosJeffries</authorinitials><revremark>spelling</revremark></revision><revision><revnumber>11</revnumber><date>2011-06-05 10:23:31</date><authorinitials>AmosJeffries</authorinitials><revremark>import popular OS list from AboutSquid</revremark></revision><revision><revnumber>10</revnumber><date>2011-03-29 06:31:40</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>9</revnumber><date>2009-04-17 01:43:41</date><authorinitials>AmosJeffries</authorinitials><revremark>link the right RAID page :)</revremark></revision><revision><revnumber>8</revnumber><date>2009-04-17 01:41:59</date><authorinitials>AmosJeffries</authorinitials><revremark>link to RAID page, and add possibility for new ext4</revremark></revision><revision><revnumber>7</revnumber><date>2008-05-18 19:38:58</date><authorinitials>localhost</authorinitials><revremark>converted to 1.6 markup</revremark></revision><revision><revnumber>6</revnumber><date>2006-08-06 17:51:27</date><authorinitials>i577B486B.versanet.de</authorinitials></revision><revision><revnumber>5</revnumber><date>2006-08-06 17:47:32</date><authorinitials>i577B486B.versanet.de</authorinitials><revremark>added solaris</revremark></revision><revision><revnumber>4</revnumber><date>2005-10-15 21:56:07</date><authorinitials>kinkie</authorinitials></revision><revision><revnumber>3</revnumber><date>2005-10-13 12:33:25</date><authorinitials>kinkie</authorinitials></revision><revision><revnumber>2</revnumber><date>2005-10-13 12:02:22</date><authorinitials>kinkie</authorinitials></revision><revision><revnumber>1</revnumber><date>2005-10-13 10:42:28</date><authorinitials>kinkie</authorinitials><revremark>First version. Missing details on OSes other than Linux</revremark></revision></revhistory></articleinfo><section><title>What is the Best OS for Squid?</title><para>This is an all-time favourite FAQ, bound to show up every now and then Squid Users mailing-list. </para><para>Generally speaking, any modern Linux, Unix-like operating system will offer similarly good performance. A technically sensible administrator will choose the best tool for the job, which means whatever OS she is most comfortable with. </para><para>Several Linux distributions, FreeBSD, OpenBSD and Windows tend to be common choices. </para><section><title>Tuning for More</title><para>What matters the most to obtain the most out of any setup is to properly tune a few parameters. In priority order: </para><itemizedlist><listitem><para>amount of physical memory available </para><itemizedlist><listitem override="none"><para>the more the better, squid performance will suffer badly if parts of it are swapped out of core memory </para></listitem></itemizedlist></listitem><listitem><para>CPU speed and core count </para><itemizedlist><listitem override="none"><para>few faster cores are better than many slow cores. SMP Squid can currently operate most efficiently with 4-8 fast cores </para></listitem><listitem override="none"><para>only the physical cores are useful, hyper-threaded &quot;cores&quot; can actually reduce performance given Squid's workloads and use patterns </para></listitem></itemizedlist></listitem><listitem><para>Number of harddrives used for cache and their architecture </para><itemizedlist><listitem override="none"><para>squid disk access patterns hit particularly hard RAID systems - especially RAID4/5. Since the data are not by definition valuable, it is recommended to run the cache_dirs on JBOD (&quot;just a bunch of disks&quot;, in other words NO RAID) (see <ulink url="https://wiki.squid-cache.org/BestOsForSquid/SquidFaq/RAID#">SquidFaq/RAID</ulink>) </para></listitem><listitem override="none"><para>of course the disk type matters: SSD performs better than HDD (but be mindful about lifecycle), 15kRPM is better than 5.4kRPM, etc. </para></listitem></itemizedlist></listitem><listitem><para>noatime mount option </para><itemizedlist><listitem override="none"><para>atime is just useless for cache data - squid does its own timestamping, mounting the filesystem with the noatime option just saves a whole lot of writes to the disks </para></listitem></itemizedlist></listitem><listitem><para>amount of space used </para><itemizedlist><listitem override="none"><para>always leave about 20% of free space on the filesystems containing your cache_dirs: generally FS performance degrades dramatically if used space exceeds 80% </para></listitem></itemizedlist></listitem><listitem><para>type of filesystem </para><itemizedlist><listitem override="none"><para>only applies on OSes which offer multiple choices (except for a few really bad choices of FS). see below. </para></listitem></itemizedlist></listitem></itemizedlist><para>On systems with synchronous directory updates (Solaris, some BSD versions) </para><itemizedlist><listitem><para>mount option to enable asynchronous directory updates, or preferably a filesystem meta journal on a separate device taking the heat of directory updates. </para></listitem></itemizedlist><para>--  <ulink url="https://wiki.squid-cache.org/BestOsForSquid/CategoryUpdated#">CategoryUpdated</ulink> </para></section></section></article>