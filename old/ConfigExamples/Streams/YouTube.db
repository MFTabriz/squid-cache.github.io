<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>ConfigExamples/Streams/YouTube</title><revhistory><revision><revnumber>11</revnumber><date>2015-08-20 14:23:11</date><authorinitials>YuriVoinov</authorinitials></revision><revision><revnumber>10</revnumber><date>2015-08-20 14:22:01</date><authorinitials>YuriVoinov</authorinitials></revision><revision><revnumber>9</revnumber><date>2015-08-20 14:21:28</date><authorinitials>YuriVoinov</authorinitials></revision><revision><revnumber>8</revnumber><date>2015-08-20 14:19:41</date><authorinitials>YuriVoinov</authorinitials></revision><revision><revnumber>7</revnumber><date>2015-08-20 14:15:30</date><authorinitials>YuriVoinov</authorinitials></revision><revision><revnumber>6</revnumber><date>2015-08-20 14:14:49</date><authorinitials>YuriVoinov</authorinitials></revision><revision><revnumber>5</revnumber><date>2014-02-14 02:22:49</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>4</revnumber><date>2014-02-14 02:22:23</date><authorinitials>AmosJeffries</authorinitials><revremark>Thanks Carlos Defoe for pointing out accounts.youtube.com is special</revremark></revision><revision><revnumber>3</revnumber><date>2010-02-19 13:16:32</date><authorinitials>FrancescoChemolli</authorinitials><revremark>Fixed dangling wiki-links</revremark></revision><revision><revnumber>2</revnumber><date>2010-02-19 13:14:00</date><authorinitials>FrancescoChemolli</authorinitials><revremark>Fixed dangling wiki-links</revremark></revision><revision><revnumber>1</revnumber><date>2009-08-03 08:42:52</date><authorinitials>AmosJeffries</authorinitials><revremark>import and modify the youtube patterns for blocking.</revremark></revision></revhistory></articleinfo><section><title>Blocking YouTube Videos</title><para><emphasis role="strong">Warning</emphasis>: Any example presented here is provided &quot;as-is&quot; with no support or guarantee of suitability. If you have any further questions about these examples please email the squid-users mailing list. </para><section><title>Outline</title><para>This example covers the blocking of all YouTube.com videos. Which is actually very easy. </para><para>Caching them is now impossible, for information on that see <ulink url="https://wiki.squid-cache.org/ConfigExamples/Streams/YouTube/ConfigExamples/DynamicContent/YouTube/Discussion#">ConfigExamples/DynamicContent/YouTube/Discussion</ulink> </para></section><section><title>Squid Configuration File</title><para>Add this to squid.conf before the part where you allow people access to the Internet. </para><itemizedlist><listitem override="none"><para><inlinemediaobject><imageobject><imagedata depth="16" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/icon-error.png" width="16"/></imageobject><textobject><phrase>{X}</phrase></textobject></inlinemediaobject> As of Feb 2014 Google are using one subdomain of youtube.com for authenticating <emphasis role="strong">all</emphasis> google services, including Docs and Gmail. If you were intending to block only YouTube access this needs to be whitelisted from the denial. </para></listitem></itemizedlist><screen><![CDATA[## The videos come from several domains
acl youtube_domains dstdomain .youtube.com .googlevideo.com .ytimg.com
]]><![CDATA[
## G* services authentication domain
acl gLogin dstdomain accounts.youtube.com
]]><![CDATA[
http_access deny youtube_domains !gLogin]]></screen><para>Other sites than YouTube also host this kind of content. See the Flash Video section of <ulink url="https://wiki.squid-cache.org/ConfigExamples/Streams/YouTube/ConfigExamples/Streams/Other#">ConfigExamples/Streams/Other</ulink> for general flash media patterns withut needing to block specific websites. </para><para>To block not all YT, but some clips, use focused acl rule: </para><screen><![CDATA[# Block YT clips
acl yt_clips url_regex .youtube\.com\/watch\?v=lr_m3GW5Cws
http_access deny yt_clips]]></screen><para>You also can specify clips list as file. </para><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/ConfigExamples/Streams/YouTube/CategoryConfigExample#">CategoryConfigExample</ulink> </para></section></section></article>