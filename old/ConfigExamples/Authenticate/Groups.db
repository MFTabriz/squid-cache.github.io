<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>ConfigExamples/Authenticate/Groups</title><revhistory><revision><revnumber>3</revnumber><date>2021-07-02 14:44:42</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>2</revnumber><date>2021-07-02 14:41:36</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>1</revnumber><date>2014-02-04 09:45:51</date><authorinitials>AmosJeffries</authorinitials><revremark>migrate from NtlmWithGroups</revremark></revision></revhistory></articleinfo><section><title>Configure Squid for Group-Based access controls</title><para><emphasis role="strong">Warning</emphasis>: Any example presented here is provided &quot;as-is&quot; with no support or guarantee of suitability. If you have any further questions about these examples please email the squid-users mailing list. </para><section><title>Outline</title><para>To perform group-based access controls you need to already have authentication configured and working on a per-user basis. </para><para>Details on how to do that are covered in: </para><itemizedlist><listitem><para><ulink url="https://wiki.squid-cache.org/ConfigExamples/Authenticate/Groups/ConfigExamples/Authenticate/Ntlm#">ConfigExamples/Authenticate/Ntlm</ulink> for NTLM (only) </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/ConfigExamples/Authenticate/Groups/ConfigExamples/Authenticate/WindowsActiveDirectory#">ConfigExamples/Authenticate/WindowsActiveDirectory</ulink> for Negotiate (NTLM and/or Kerberos) </para></listitem></itemizedlist><para>The example below uses winbind for group lookps. There are several other helpers bundled with Squid that perform group lookups.</para><para>Look for <emphasis role="strong">group</emphasis> check type in the <emphasis role="strong">Access Control</emphasis> section of the <ulink url="http://www.squid-cache.org/Doc/man/">helpers index</ulink>. </para></section><section><title>Squid Configuration File</title><para>Create and ACL for checking the group access: </para><screen><![CDATA[external_acl_type testForGroup %LOGIN /usr/local/squid/libexec/ext_wbinfo_group_acl.pl
]]><![CDATA[
acl inGroupX external testForGroup someGroupNameX]]></screen><para>and to use the ACL as you would any other authentication ACL </para><screen><![CDATA[http_access allow inGroupX]]></screen><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/ConfigExamples/Authenticate/Groups/CategoryConfigExample#">CategoryConfigExample</ulink> </para></section></section></article>