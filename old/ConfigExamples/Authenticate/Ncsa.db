<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>ConfigExamples/Authenticate/Ncsa</title><revhistory><revision><revnumber>3</revnumber><date>2021-07-02 14:43:49</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>2</revnumber><date>2020-06-11 16:55:04</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>1</revnumber><date>2020-06-11 16:53:51</date><authorinitials>AmosJeffries</authorinitials><revremark>Add NCSA details, it seems to be becoming popular</revremark></revision></revhistory></articleinfo><section><title>Authenticate with NCSA httpd-style password file</title><para><emphasis role="strong">Warning</emphasis>: Any example presented here is provided &quot;as-is&quot; with no support or guarantee of suitability. If you have any further questions about these examples please email the squid-users mailing list. </para><section><title>Outline</title><para>In this example a squid installation will use NCSA to authenticate users before allowing them to use the proxy. </para></section><section><title>Usage</title></section><section><title>The password file</title><para>Creating a new password file: </para><screen><![CDATA[htpasswd -c -nbm /etc/squid/passwords username password]]></screen><para>Adding users: </para><screen><![CDATA[htpasswd -nbm /etc/squid/passwords username password]]></screen><para>Deleting users: </para><screen><![CDATA[htpasswd -D -nbm /etc/squid/passwords username password]]></screen><itemizedlist><listitem><para><inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> The <emphasis role="strong">m</emphasis> option specifies MD5 encryption which is the default for htpasswd. </para></listitem></itemizedlist><para>Squid helpers support DES, MD5 and SHA encryption of the passwords file. Bcrypt requires additional support in the crypto libraries Squid is built with so may or may not work. </para></section><section><title>Squid Configuration File</title><para>Paste the configuration file like this: </para><screen><![CDATA[auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwords
auth_param basic children 5
auth_param basic credentialsttl 1 minute]]></screen><para>The basic auth ACL controls to make use of it are: </para><screen><![CDATA[acl auth proxy_auth REQUIRED
]]><![CDATA[
http_access deny !auth
http_access allow auth
http_access deny all]]></screen><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/ConfigExamples/Authenticate/Ncsa/CategoryConfigExample#">CategoryConfigExample</ulink> </para></section></section></article>