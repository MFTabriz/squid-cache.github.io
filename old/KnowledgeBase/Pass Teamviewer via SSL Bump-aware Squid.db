<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>KnowledgeBase/Pass Teamviewer via SSL Bump-aware Squid</title><revhistory><revision><revnumber>2</revnumber><date>2017-12-16 08:35:09</date><authorinitials>YuriVoinov</authorinitials></revision><revision><revnumber>1</revnumber><date>2017-12-16 08:26:24</date><authorinitials>YuriVoinov</authorinitials></revision></revhistory></articleinfo><section><title>Pass Teamviewer via SSL Bump-aware Squid</title><para><emphasis>by <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Pass Teamviewer via SSL Bump-aware Squid/YuriVoinov#">YuriVoinov</ulink></emphasis> </para><para><emphasis role="strong">Synopsis</emphasis> </para><para>Some administrators require to pass <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Pass Teamviewer via SSL Bump-aware Squid/TeamViewer#">TeamViewer</ulink> (version 12+) via SSL Bump-aware squid. </para><para><emphasis role="strong">Symptoms</emphasis> </para><para>Some administrators require to pass <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Pass Teamviewer via SSL Bump-aware Squid/TeamViewer#">TeamViewer</ulink> (version 12+) via SSL Bump-aware squid. TV client can't connect to server and completely don't work with erroneous message. </para><para><emphasis role="strong">Explanation</emphasis> </para><para>Modern TV clients uses SSL pinning for some own URL's. This prevents connect TV client to cloud and produces wrong error (like this: &quot;Your antivirus/firewall blocks connection to server&quot;). </para><para><emphasis role="strong">Workaround</emphasis> </para><para>To make it work require to add this lines: </para><screen><![CDATA[# Teamviewer
(master|ping)[0-9][0-9]?\.teamviewer\.com]]></screen><para>to your splice ACL and reconfigure squid. </para><para>ACL should looks like this: </para><screen><![CDATA[acl NoSSLIntercept ssl::server_name_regex "/usr/local/squid/etc/acl.url.nobump"
ssl_bump splice NoSSLIntercept]]></screen><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Pass Teamviewer via SSL Bump-aware Squid/CategoryKnowledgeBase#">CategoryKnowledgeBase</ulink> </para></section></article>