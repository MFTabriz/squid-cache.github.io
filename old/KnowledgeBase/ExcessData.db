<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>KnowledgeBase/ExcessData</title><revhistory><revision><revnumber>3</revnumber><date>2012-07-24 01:22:10</date><authorinitials>AmosJeffries</authorinitials><revremark>typo and grammar fix</revremark></revision><revision><revnumber>2</revnumber><date>2011-11-22 22:29:22</date><authorinitials>AmosJeffries</authorinitials><revremark>switch to ErrorMessages category</revremark></revision><revision><revnumber>1</revnumber><date>2011-04-12 00:15:21</date><authorinitials>AmosJeffries</authorinitials><revremark>explain log messages</revremark></revision></revhistory></articleinfo><section><title>Excess Data</title><para><emphasis role="strong">Symptoms</emphasis> </para><itemizedlist><listitem><para>httpReadReply: Excess data from &quot;GET <ulink url="http://example.com"/>&quot; </para></listitem></itemizedlist><para><emphasis role="strong">Explanation</emphasis> </para><para>HTTP transactions contain headers specifying the sizes of objects transferred. When these are present Squid will validate the object actually does match the size it is supposed to. This message is what gets logged when the object received back is larger than it is supposed to be. </para><para>It is a sign that the transfer has been altered somewhere between the website and your Squid. </para><itemizedlist><listitem><para>It could be a cache-poisoning security attack on your traffic. Attempting to inject false replies into your cache, spreading an embedded infection to other clients on the network. </para></listitem><listitem><para>It could be a broken proxy (other than yours) failing to update the reply headers correctly after re-validation. <inlinemediaobject><imageobject><imagedata depth="13" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/prio1.png" width="15"/></imageobject><textobject><phrase>{1}</phrase></textobject></inlinemediaobject> </para></listitem><listitem><para>It could be a broken adaptation service failing to adjust the new size of the object. <inlinemediaobject><imageobject><imagedata depth="13" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/prio1.png" width="15"/></imageobject><textobject><phrase>{1}</phrase></textobject></inlinemediaobject> </para></listitem><listitem><para>It could be a service somewhere sending length header on chunked replies. <inlinemediaobject><imageobject><imagedata depth="13" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/prio1.png" width="15"/></imageobject><textobject><phrase>{1}</phrase></textobject></inlinemediaobject> </para></listitem></itemizedlist><para>Squid protects itself and your other clients against these possibilities by erasing the broken received copy and not sharing it out to other clients. </para><para>The specific client who received the bad response is unfortunately left to handle broken reply itself. Squid will try to assist by aborting the connection with a RESET, indicating that the something nasty has gone on. Not all clients handle this cleanly. </para><para><emphasis role="strong">Workaround</emphasis> </para><para>There is no generally usable workaround for this problem. Fixes for this are very specific to your installation and which of the above problems is causing it. </para><para>Some of the options include: </para><itemizedlist><listitem><para>ACLs blocking access to the problem website </para></listitem><listitem><para>Bypassing the proxy for that specific site (unsafe if it really is an attack). </para></listitem><listitem><para>Tracking down which of the causes is occurring and reporting the problem. </para></listitem><listitem><para>In the cases labelled <inlinemediaobject><imageobject><imagedata depth="13" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/prio1.png" width="15"/></imageobject><textobject><phrase>{1}</phrase></textobject></inlinemediaobject> software upgrades for the relevant middleware might help. </para></listitem></itemizedlist><para>NP: if you track it down to some other cause not mentioned above, we would like to know so this article gets updated. </para><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/KnowledgeBase/ExcessData/CategoryKnowledgeBase#">CategoryKnowledgeBase</ulink> <ulink url="https://wiki.squid-cache.org/KnowledgeBase/ExcessData/CategoryErrorMessages#">CategoryErrorMessages</ulink> </para></section></article>