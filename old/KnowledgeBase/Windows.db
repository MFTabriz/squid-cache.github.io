<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>KnowledgeBase/Windows</title><revhistory><revision><revnumber>26</revnumber><date>2021-07-02 14:40:37</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>25</revnumber><date>2021-06-29 08:48:55</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>24</revnumber><date>2021-06-27 22:10:04</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>23</revnumber><date>2021-05-27 06:20:05</date><authorinitials>AmosJeffries</authorinitials><revremark>Amos no longer doing native mingw32 builds</revremark></revision><revision><revnumber>22</revnumber><date>2021-05-27 06:18:40</date><authorinitials>AmosJeffries</authorinitials><revremark>bzr no longer relevant</revremark></revision><revision><revnumber>21</revnumber><date>2021-05-27 06:18:02</date><authorinitials>AmosJeffries</authorinitials><revremark>Acme removed their downloads and historic Squid information</revremark></revision><revision><revnumber>20</revnumber><date>2021-05-27 05:44:10</date><authorinitials>AmosJeffries</authorinitials><revremark>Diladele have published v4 recently</revremark></revision><revision><revnumber>19</revnumber><date>2015-05-18 04:52:31</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>18</revnumber><date>2015-05-18 04:47:06</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>17</revnumber><date>2015-05-18 04:46:11</date><authorinitials>AmosJeffries</authorinitials><revremark>Diladele have released 3.5.4 MSI installer packages</revremark></revision><revision><revnumber>16</revnumber><date>2015-02-10 09:02:44</date><authorinitials>AmosJeffries</authorinitials><revremark>link to mingw-w64 download</revremark></revision><revision><revnumber>15</revnumber><date>2015-02-10 04:36:04</date><authorinitials>AmosJeffries</authorinitials><revremark>status update, and remove old cruft</revremark></revision><revision><revnumber>14</revnumber><date>2014-10-13 14:48:53</date><authorinitials>AmosJeffries</authorinitials><revremark>fixed Error 127 with static library linking now done automatically</revremark></revision><revision><revnumber>13</revnumber><date>2014-10-13 09:48:31</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>12</revnumber><date>2014-10-13 06:03:52</date><authorinitials>AmosJeffries</authorinitials><revremark>update details of available packages to include cygwin packages, and match documentation form of other OS pages. Also Guido is no longer maintaining packages, just supplying.</revremark></revision><revision><revnumber>11</revnumber><date>2014-10-03 10:09:35</date><authorinitials>AmosJeffries</authorinitials><revremark>found error code from cross-build binaries. still no idea whats doing it though</revremark></revision><revision><revnumber>10</revnumber><date>2014-10-02 18:17:33</date><authorinitials>AmosJeffries</authorinitials><revremark>3.HEAD building finally on MinGW</revremark></revision><revision><revnumber>9</revnumber><date>2014-09-30 07:32:03</date><authorinitials>AmosJeffries</authorinitials><revremark>update cross-build results so far</revremark></revision><revision><revnumber>8</revnumber><date>2014-07-10 10:55:45</date><authorinitials>AmosJeffries</authorinitials><revremark>add a section detailing where we are at with Squid-3 on windows.</revremark></revision><revision><revnumber>7</revnumber><date>2013-07-31 01:40:47</date><authorinitials>AmosJeffries</authorinitials><revremark>add note about libdb being outdated on recent releases</revremark></revision><revision><revnumber>6</revnumber><date>2013-07-21 12:01:54</date><authorinitials>AmosJeffries</authorinitials><revremark>fix section indentation</revremark></revision><revision><revnumber>5</revnumber><date>2013-07-21 11:52:49</date><authorinitials>AmosJeffries</authorinitials><revremark>polish to match other OS pages, fix some wiki links and syntax highlighting</revremark></revision><revision><revnumber>4</revnumber><date>2010-07-02 03:22:08</date><authorinitials>AmosJeffries</authorinitials><revremark>HEAD to 3.HEAD updates</revremark></revision><revision><revnumber>3</revnumber><date>2009-12-22 12:55:06</date><authorinitials>DavidRawling</authorinitials><revremark>Minor grammatical tweak</revremark></revision><revision><revnumber>2</revnumber><date>2009-12-22 00:47:49</date><authorinitials>AmosJeffries</authorinitials><revremark>import release notes texts. this is a better place for the cross-release windows details.</revremark></revision><revision><revnumber>1</revnumber><date>2009-12-04 12:25:42</date><authorinitials>AmosJeffries</authorinitials><revremark>create from bits of binary packages, about, and compiling help pages.</revremark></revision></revhistory></articleinfo><section><title>Squid on Windows</title><section><title>Does Squid run on Windows ?</title><para>Squid can compile and run on Windows as a system service using the <ulink url="http://www.cygwin.com/">Cygwin</ulink> emulation environment, or can be compiled in Windows native mode using the <ulink url="http://www.mingw.org/">MinGW</ulink> + MSYS development environment. Windows NT 4 SP4 and later are supported. </para><para>On Windows 2000 and later the service is configured to use the Windows Service Recovery option restarting automatically after 60 seconds. </para><itemizedlist><listitem override="none"><para><inlinemediaobject><imageobject><imagedata depth="16" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/icon-info.png" width="16"/></imageobject><textobject><phrase>{i}</phrase></textobject></inlinemediaobject> The original development code name of the 2.5 project port was SquidNT, but after the 2.6.STABLE4 release, this project was complete. So when speaking about Squid on Windows, people should always refer to Squid, instead to the old SquidNT name.    </para></listitem></itemizedlist><section><title>Known Limitations</title><itemizedlist><listitem><para>Squid features not operational: </para><itemizedlist><listitem><para>DISKD: still needs to be ported </para></listitem><listitem><para>Transparent Proxy: missing Windows non commercial interception driver </para></listitem><listitem><para>WCCP: these features have not been ported. Without transparent proxy support there is no need or use. </para></listitem><listitem><para>SMP support: Windows equivalent of UDS sockets has not been implemented </para></listitem></itemizedlist></listitem><listitem><para>Some code sections can make blocking calls. </para></listitem><listitem><para>Some external helpers may not work. </para></listitem><listitem><para>File Descriptors number hard-limited to 2048 when building with MinGW. </para></listitem><listitem><para>Squid-3.x of all formal releases have major build issues. </para></listitem></itemizedlist></section></section><section><title>Pre-Built Binary Packages</title><para>Packages available for Squid on multiple environments. </para><section><title>Squid-4</title><para>Maintainer: Rafael Akchurin, <ulink url="http://www.diladele.com/">Diladele B.V.</ulink> </para><para>Bug Reporting: (about the installer only) <ulink url="https://github.com/diladele/squid-windows/issues"/> </para><para>MSI installer packages for Windows are at: </para><itemizedlist><listitem><para>64-bit: <ulink url="http://squid.diladele.com/"/> </para></listitem></itemizedlist></section><section><title>Squid-3.3</title><para>Bug Reporting: see <ulink url="https://cygwin.com/problems.html"/> </para><para>Binary packages for the Cygwin environment on Windows are at: </para><itemizedlist><listitem><para>32-bit: <ulink url="https://cygwin.com/packages/x86/squid/"/> </para></listitem><listitem><para>64-bit: <ulink url="https://cygwin.com/packages/x86_64/squid/"/> </para></listitem></itemizedlist></section></section></section><section><title>Installing Squid</title><section><title>Service</title><para>Some new command line options were added for the Windows service support: </para><itemizedlist><listitem><para><emphasis role="strong">-n</emphasis> switch to specify the Windows Service Name. Multiple Squid service instances are allowed. <emphasis role="strong">Squid</emphasis> is the default when the switch is not used. All service control operations use this switch to identify the destination instance being targeted. </para></listitem><listitem><para><emphasis role="strong">-i</emphasis> switch to install the Windows service. It's possible to use <emphasis role="strong">-f</emphasis> switch at the same time to specify a different squid.conf file for the Squid Service that will be stored on the Windows Registry. To install the service, the syntax is: </para></listitem></itemizedlist><screen><![CDATA[squid -i [-f file] [-n service-name]]]></screen><itemizedlist><listitem><para><emphasis role="strong">-r</emphasis> switch will uninstall the Windows service. Use the appropriate <emphasis role="strong">-n</emphasis> switch to determine which service instance is being removed. To uninstall the service, the syntax is: </para></listitem></itemizedlist><screen><![CDATA[squid -r [-n service-name]]]></screen><itemizedlist><listitem><para><emphasis role="strong">-k</emphasis> switch is not new, but requires the use of <emphasis role="strong">-n</emphasis> to target the service instance. The syntax is: </para></listitem></itemizedlist><screen><![CDATA[squid -k command [-f file] [-n service-name]]]></screen></section><section><title>Command Line</title><para>To use the Squid original command line, the new <emphasis role="strong">-O</emphasis> switch must be used <emphasis role="strong">ONCE</emphasis>, the syntax is: </para><screen><![CDATA[squid -O cmdline [-n service-name]]]></screen><para>If multiple service command line options must be specified, use quote. The <emphasis role="strong">-n</emphasis> switch is needed only when a non default service name is in use. </para><itemizedlist><listitem override="none"><para><inlinemediaobject><imageobject><imagedata depth="16" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/icon-error.png" width="16"/></imageobject><textobject><phrase>{X}</phrase></textobject></inlinemediaobject> Don't use the &quot;Start parameters&quot; in the Windows 2000/XP/2003 Service applet. They are specific to Windows services functionality and Squid is not able to interpret and use them. </para></listitem></itemizedlist><para>In the following example the command line of the &quot;squidsvc&quot; Squid service is set to &quot;-D -u 3130&quot;: </para><screen><![CDATA[squid -O "-u 3130" -n squidsvc]]></screen></section><section><title>Cache Manager CGI on Windows</title><para>On Windows, <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/Features/CacheManager#">cache manager</ulink> can be used with Microsoft IIS or Apache. Some specific configuration could be needed: </para><itemizedlist><listitem><para>IIS 6 (Windows 2003): </para><itemizedlist><listitem><para>On IIS 6.0 all CGI extensions are denied by default for security reason, so the following configuration is needed: </para><itemizedlist><listitem><para>Create a cgi-bin Directory </para></listitem><listitem><para>Define the cgi-bin IIS Virtual Directory with read and CGI execute IIS permissions, ASP scripts are not needed. This automatically defines a cgi-bin IIS web application </para></listitem><listitem><para>Copy cachemgr.cgi into cgi-bin directory and look to file permissions: the IIS system account and SYSTEM must be able to read and execute the file </para></listitem><listitem><para>In IIS manager go to Web Service extensions and add a new Web Service Extension called &quot;Squid Cachemgr&quot;, add the cachemgr.cgi file and set the extension status to Allowed </para></listitem></itemizedlist></listitem></itemizedlist></listitem><listitem><para>Apache: </para><itemizedlist><listitem><para>On Windows, cachemgr.cgi needs to create a temporary file, so Apache must be instructed to pass the TMP and TEMP Windows environment variables to CGI applications: </para></listitem></itemizedlist></listitem></itemizedlist><screen><![CDATA[ScriptAlias /squid/cgi-bin/ "c:/squid/libexec/"
<Location /squid/cgi-bin/cachemgr.cgi>
    PassEnv TMP TEMP
    Order allow,deny
    Allow from workstation.example.com
</Location>]]></screen></section><section><title>Configuration Guides</title><itemizedlist><listitem><para><ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/SquidFaq/WindowsUpdate#">Windows Update</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/ConfigExamples/Authenticate/WindowsActiveDirectory#">Active Directory Authentication</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/ConfigExamples/Authenticate/Kerberos#">Kerberos Authentication</ulink> </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/ConfigExamples/Authenticate/Ntlm#">NTLM Authentication</ulink> (<ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/ConfigExamples/Authenticate/NtlmWithGroups#">with Groups</ulink>) </para></listitem></itemizedlist><para>These and many other general manuals in the <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/ConfigExamples#">ConfigExamples</ulink> section. </para></section><section><title>Registry DNS lookup</title><para>On Windows platforms, if no value is specified in the <ulink url="http://www.squid-cache.org/Doc/config/dns_nameservers#">dns_nameservers</ulink> option in squid.conf or in the /etc/resolv.conf file, the list of DNS name servers are taken from the Windows registry, both static and dynamic DHCP configurations are supported. </para></section><section><title>Compatibility Notes</title><itemizedlist><listitem><para>It's recommended to use '/' char in Squid paths instead of '\' </para></listitem><listitem><para>Paths with spaces (like 'C:\Programs Files\Squid) are NOT supported by Squid </para></listitem><listitem><para>When using ACL like '<ulink url="http://www.squid-cache.org/Doc/config/acl#">acl</ulink> aclname acltype &quot;file&quot;' the file must be in DOS text format (CR+LF) and the full Windows path must be specified, for example: </para></listitem></itemizedlist><screen><![CDATA[acl blocklist dstdomain "c:/squid/etc/blocked1.txt"]]></screen><itemizedlist><listitem><para>The Windows equivalent of '/dev/null' is 'NUL' </para></listitem><listitem><para>Squid doesn't know how to run external helpers based on scripts, like .bat, .cmd, .vbs, .pl, etc. So in squid.conf the interpreter path must be always specified, for example: </para></listitem></itemizedlist><screen><![CDATA[url_rewrite_program c:/perl/bin/perl.exe c:/squid/libexec/redir.pl
url_rewrite_program c:/winnt/system32/cmd.exe /C c:/squid/libexec/redir.cmd]]></screen><itemizedlist><listitem><para>When Squid runs in command line mode, the launching user account must have administrative privilege on the system </para></listitem><listitem><para>&quot;Start parameters&quot; in the Windows 2000/XP/2003 Service applet cannot be used </para></listitem><listitem><para>On Windows Vista and later, User Account Control (UAC) must be disabled before running service installation </para></listitem></itemizedlist></section></section><section><title>Compiling</title><itemizedlist><listitem override="none"><para>These instructions apply to building <emphasis role="strong">Squid-3.x</emphasis>. Squid-2 package are available for download. See the  </para></listitem></itemizedlist><para><emphasis role="strong">New configure options:</emphasis> </para><itemizedlist><listitem><para>--enable-win32-service </para></listitem></itemizedlist><para><emphasis role="strong">Updated configure options:</emphasis> </para><itemizedlist><listitem><para>--enable-default-hostsfile </para></listitem></itemizedlist><para><emphasis role="strong">Unsupported configure options:</emphasis> </para><itemizedlist><listitem><para>--with-large-files: No suitable build environment is available on both Cygwin and MinGW, but --enable-large-files works fine </para></listitem></itemizedlist><section><title>Compiling with Cygwin</title><itemizedlist><listitem override="none"><para><emphasis role="strong">This section needs re-writing. Is has very little in compiling Squid and much about installation.</emphasis> </para></listitem></itemizedlist><para>In order to compile Squid, you need to have Cygwin fully installed. </para><para>The usage of the Cygwin environment is very similar to other Unix/Linux environments, and -devel version of libraries must be installed. </para><informaltable><tgroup cols="2"><colspec colname="col_0"/><colspec colname="col_1"/><tbody><row rowsep="1"><entry colsep="1" rowsep="1"><para> <inlinemediaobject><imageobject><imagedata depth="16" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/icon-info.png" width="16"/></imageobject><textobject><phrase>{i}</phrase></textobject></inlinemediaobject> </para></entry><entry colsep="1" rowsep="1"><para>Squid will by default, install into <emphasis>/usr/local/squid</emphasis>. If you wish to install somewhere else, see the <emphasis>--prefix</emphasis> option for configure.</para></entry></row></tbody></tgroup></informaltable><para>Now, add a new Cygwin user - see the Cygwin user guide - and map it to SYSTEM, or create a new NT user, and a matching Cygwin user and they become the squid runas users. </para><para>Read the squid FAQ on permissions if you are using CYGWIN=ntsec. </para><para>When that has completed run: </para><screen><![CDATA[squid -z]]></screen><para>If that succeeds, try: </para><screen><![CDATA[squid -N -D -d1]]></screen><para>Squid should start. Check that there are no errors. If everything looks good, try browsing through squid. </para><para>Now, configure <emphasis>cygrunsrv</emphasis> to run Squid as a service as the chosen username. You may need to check permissions here. </para></section><section><title>Compiling with MinGW</title><para>In order to compile squid using the MinGW environment, the packages MSYS, MinGW and msysDTK must be installed. Some additional libraries and tools must be downloaded separately: </para><itemizedlist><listitem><para>OpenSSL: <ulink url="http://www.slproweb.com/products/Win32OpenSSL.html">Shining Light Productions Win32 OpenSSL</ulink> </para></listitem><listitem><para>libcrypt: <ulink url="http://sourceforge.net/projects/mingwrep/">MinGW packages repository</ulink> </para></listitem><listitem><para>db-1.85: <ulink url="http://tiny-cobol.sourceforge.net/download.php">TinyCOBOL download area</ulink> </para><itemizedlist><listitem override="none"><para><inlinemediaobject><imageobject><imagedata depth="16" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/icon-info.png" width="16"/></imageobject><textobject><phrase>{i}</phrase></textobject></inlinemediaobject> 3.2+ releases require a newer 4.6 or later version of libdb </para></listitem></itemizedlist></listitem></itemizedlist><para>Before building Squid with SSL support, some operations are needed (in the following example OpenSSL is installed in C:\OpenSSL and MinGW in C:\MinGW): </para><itemizedlist><listitem><para>Copy C:\OpenSSL\lib\MinGW content to C:\MinGW\lib </para></listitem><listitem><para>Copy C:\OpenSSL\include\openssl content to C:\MinGW\include\openssl </para></listitem><listitem><para>Rename C:\MinGW\lib\ssleay32.a to C:\MinGW\lib\libssleay32.a </para></listitem></itemizedlist><para>Unpack the source archive as usual and run configure. </para><para>The following are the recommended minimal options for Windows: </para><para><emphasis role="strong">Squid-3</emphasis> : (requires <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/Squid-3.5#">Squid-3.5</ulink> or later, see porting efforts section below) </para><screen><![CDATA[--prefix=c:/squid
--enable-default-hostsfile=none]]></screen><para>Then run make and install as usual. </para><para>Squid will install into <emphasis>c:\squid</emphasis>. If you wish to install somewhere else, change the <emphasis>--prefix</emphasis> option for configure. </para><para>When that has completed run: </para><screen><![CDATA[squid -z]]></screen><para>If that succeeds, try: </para><screen><![CDATA[squid -N -D -d1]]></screen><itemizedlist><listitem><para>squid should start. Check that there are no errors. If everything looks good, try browsing through squid. </para></listitem></itemizedlist><para>Now, to run Squid as a Windows system service, run <emphasis>squid -n</emphasis>, this will create a service named &quot;Squid&quot; with automatic startup. To start it run <emphasis>net start squid</emphasis> from command line prompt or use the Services Administrative Applet. </para><para>Always check the provided release notes for any version specific detail. </para></section></section><section><title>Compiling with msys2</title><itemizedlist><listitem><para>Download and install <ulink url="https://www.msys2.org/">msys2</ulink> </para></listitem><listitem><para>download and install <ulink url="https://www.oracle.com/java/technologies/javase-jre8-downloads.html">Java JRE</ulink> </para></listitem><listitem><para>download and install git  </para></listitem><listitem><para>run: </para><itemizedlist><listitem override="none"><para><code>pacman -Syu</code> </para></listitem><listitem override="none"><para><code>pacman -Su</code> </para></listitem><listitem override="none"><para><code>pacman -S --needed base-devel mingw-w64-x86_64-toolchain</code> </para></listitem><listitem override="none"><para><code>pacman -S git ed editrights cygrunsrv gcc libgnutls-devel</code> </para></listitem><listitem override="none"><para>enable windows' openssh optional feature </para></listitem><listitem override="none"><para>create jenins user and c:\jenkins work dir </para></listitem></itemizedlist></listitem></itemizedlist><para>(work in progress) </para><!--rule (<hr>) is not applicable to DocBook--><para> <inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> <emphasis role="strong">End of edit conflict</emphasis> </para><!--rule (<hr>) is not applicable to DocBook--></section><section><title>Squid-3 porting efforts</title><para>Squid series 3 has major build issues on all Windows compiler systems. Below is a summary of the known status for producing a useful Squid 3.x for Windows. In a rough order of completeness as of the last page update. </para><para>The TODO list for Windows has additional wishlist items that also need to be sorted out: </para><itemizedlist><listitem><para>Separate Windows AIOPS logics from Unix AIO logics. The two are currently mashed together where they should be in separate conditionally built library modules. </para></listitem><listitem><para>Windows OIO support. Alternative to Unix AIO and AIOPS disk I/O functionality. </para></listitem><listitem><para>Building an installer </para></listitem></itemizedlist><section><title>Cygwin</title><para>Cygwin has working builds and available packages sponsored by <ulink url="http://www.diladele.com/">Diladele</ulink>. </para></section><section><title>MinGW-w64</title><para>As of <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/Squid-3.5#">Squid-3.5</ulink> : </para><itemizedlist><listitem><para>the default feature set builds without extra special ./configure options. </para></listitem><listitem><para>missing shared socket support available in Vista and later. Necessary for SMP workers. </para></listitem></itemizedlist><para><ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/AmosJeffries#">AmosJeffries</ulink> is cross-compiling with Mingw-w64 build environment on Debian, with occasional native MinGW-w64 environment builds for confirmation of changes. As this is spare-time work progress is slow. </para><itemizedlist><listitem override="none"><para><emphasis role="strong">The cross-compiling:</emphasis> </para></listitem></itemizedlist><screen><![CDATA[# Debian Packages Required:
#
# g++
#       provides GCC base compiler. GCC 4.9.1 or later required.
#
# mingw-w64
#       provides GCC cross-compiler. GCC 4.9.1 or later required.
#
# mingw-w64-tools
#       provides pkg-config and other build-time tools used by autoconf
#
]]><![CDATA[
./configure \
        --host=i686-w64-mingw32 \
        CXXFLAGS="-DWINVER=0x601 -D_WIN32_WINNT=0x601" \
        CFLAGS="-DWINVER=0x601 -D_WIN32_WINNT=0x601" \
        BUILDCXX="g++" \
        BUILDCXXFLAGS="-DFOO" \
        --enable-build-info="Windows (MinGW cross-build)"]]></screen><itemizedlist><listitem><para>This builds. </para></listitem><listitem><para>The squidclinet tool operates well, other helpers and tools are yet untested but expected to be fine. </para></listitem><listitem><para>The main Squid binary still lacks SMP support and will only operate with the <emphasis role="strong">-N</emphasis> command line option. </para><para><emphasis role="strong">The native build:</emphasis> </para></listitem></itemizedlist><para>Requires the latest packages from <ulink url="http://sourceforge.net/projects/mingw-w64/"/> with GCC 4.9 series compiler. </para><screen><![CDATA[sh ./configure \
        CXXFLAGS="-DWINVER=0x601 -D_WIN32_WINNT=0x601" \
        CFLAGS="-DWINVER=0x601 -D_WIN32_WINNT=0x601" \
        --enable-build-info="Windows (MinGW-w64)"]]></screen></section><section><title>MinGW32</title><para>Sponsorship from iCelero produced a working <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/Squid-3.2#">Squid-3.2</ulink> and <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/Squid-3.3#">Squid-3.3</ulink>. Unfortunately the product and sponsorship dropped before the final stages of this work could be cleaned up for GPL release. </para><para>As of <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/Squid-3.5#">Squid-3.5</ulink> : </para><itemizedlist><listitem><para>the default feature set builds without extra special ./configure options. </para></listitem><listitem><para>missing shared socket support available in Vista and later. Necessary for SMP workers. </para></listitem></itemizedlist><screen><![CDATA[./configure \
        CXXFLAGS="-DWINVER=0x601 -D_WIN32_WINNT=0x601" \
        CFLAGS="-DWINVER=0x601 -D_WIN32_WINNT=0x601" \
        --enable-build-info="Windows (MinGW32)"]]></screen><itemizedlist><listitem><para>This builds for <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/Squid-3.5#">Squid-3.5</ulink> but not later code. A newer GCC version than supplied with <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/MingW32#">MingW32</ulink> is required. </para></listitem><listitem><para>The main Squid binary still lacks SMP support and will only operate with the <emphasis role="strong">-N</emphasis> command line option. </para></listitem></itemizedlist><para>There also appears to be some work done by Joe Pelaez Jorge (<ulink url="https://code.launchpad.net/~joelpelaez/squid/win32"/>). </para></section><section><title>Visual Studio</title><para>Almost no work on this environment has been done since <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/Squid-2.7#">Squid-2.7</ulink>. </para><para>Entirely new .sln, .sdf and .vcxproj build files need to be generated. Ideally these would mirror the on-Windows style of convenience libraries assembled to produce a number of different binaries. Experiments along those lines have some nice results. </para></section></section><section><title>Troubleshooting</title><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/KnowledgeBase/Windows/CategoryKnowledgeBase#">CategoryKnowledgeBase</ulink> </para></section></article>