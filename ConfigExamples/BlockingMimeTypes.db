<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>ConfigExamples/BlockingMimeTypes</title><revhistory><revision><revnumber>8</revnumber><date>2021-07-03 09:45:14</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>7</revnumber><date>2009-04-02 00:40:01</date><authorinitials>AmosJeffries</authorinitials><revremark>transparent vs non-transparent is irrelevant for this.</revremark></revision><revision><revnumber>6</revnumber><date>2009-01-22 11:11:55</date><authorinitials>AmosJeffries</authorinitials><revremark>simplify and add wiki-style titles</revremark></revision><revision><revnumber>5</revnumber><date>2009-01-22 11:06:15</date><authorinitials>AmosJeffries</authorinitials><revremark>this is a config demo with example</revremark></revision><revision><revnumber>4</revnumber><date>2008-05-18 19:38:56</date><authorinitials>localhost</authorinitials><revremark>converted to 1.6 markup</revremark></revision><revision><revnumber>3</revnumber><date>2007-07-13 16:09:22</date><authorinitials>AdrianChadd</authorinitials></revision><revision><revnumber>2</revnumber><date>2007-07-13 16:05:31</date><authorinitials>AdrianChadd</authorinitials></revision><revision><revnumber>1</revnumber><date>2007-07-13 15:58:18</date><authorinitials>AdrianChadd</authorinitials></revision></revhistory></articleinfo><section><title>Blocking Content Based on MIME Types</title><section><title>Synopsis</title><para>A popular request is to block certain content types from being served to clients. Squid currently can not do &quot;content inspection&quot; to decide on the file type based on the contents, but it is able to block HTTP replies based on the servers' content MIME Type reply. </para><para>The MIME Type reply is generally set correctly so browsers are able to pass the reply to the correct module (image, text, html, flash, music, mpeg, etc.) </para></section><section><title>Example: Blocking Flash Video</title><para>One popular example is to block flash video, used by sites such as Youtube. </para><para>The MIME type for such content is &quot;video/flv&quot;. Creating an ACL to block this is easy. </para><para>First, create an ACL which matches the MIME type in question. </para><screen><![CDATA[acl deny_rep_mime_flashvideo rep_mime_type video/flv]]></screen><para>Then create a HTTP Reply ACL which denies any replies with that MIME type: </para><screen><![CDATA[http_reply_access deny deny_rep_mime_flashvideo]]></screen><para>This has been verified to block Youtube flash video content. </para><para>If the content is blocked the following similar line will be seen in access.log: </para><screen><![CDATA[1184342357.997    542 192.168.1.129 TCP_DENIED_REPLY/403 2411 GET http://74.125.15.26/get_video?video_id=fzDmJpCt9dE - DIRECT/74.125.15.26 text/html]]></screen><itemizedlist><listitem override="none"><para><inlinemediaobject><imageobject><imagedata depth="16" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/icon-info.png" width="16"/></imageobject><textobject><phrase>{i}</phrase></textobject></inlinemediaobject> Note that the reply mime-type is &quot;text/html&quot; because the error page being returned is HTML rather than the original flash video. </para></listitem></itemizedlist><section><title>Thanks</title><para>Thanks to <ulink url="https://wiki.squid-cache.org/ConfigExamples/BlockingMimeTypes/AdrianChadd#">AdrianChadd</ulink> for this basic outline; please feel free to apply for a Wiki Editor account and update the page! </para><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/ConfigExamples/BlockingMimeTypes/CategoryKnowledgeBase#">CategoryKnowledgeBase</ulink> </para></section></section></section></article>