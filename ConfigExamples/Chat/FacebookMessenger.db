<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>ConfigExamples/Chat/FacebookMessenger</title><revhistory><revision><revnumber>2</revnumber><date>2021-07-03 09:48:34</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>1</revnumber><date>2018-06-20 08:55:18</date><authorinitials>YuriVoinov</authorinitials></revision></revhistory></articleinfo><para><emphasis>by <ulink url="https://wiki.squid-cache.org/ConfigExamples/Chat/FacebookMessenger/YuriVoinov#">YuriVoinov</ulink></emphasis> </para><section><title>Facebook Messenger</title><para><emphasis role="strong">Warning</emphasis>: Any example presented here is provided &quot;as-is&quot; with no support or guarantee of suitability. If you have any further questions about these examples please email the squid-users mailing list. </para><section><title>Outline</title><para><ulink url="https://messenger.com">Facebook Messenger</ulink> is FB instant messaging application. Using it may be prohibited by corporate security policy. </para></section><section><title>Usage</title><para>Usually Facebook Messenger works in most Squid's setups without any additional configuration. Blocking it, however, require some additional steps. To block Facebook Messengert, you require SSL Bump-aware squid, or, at least, <ulink url="https://wiki.squid-cache.org/Features/SslPeekAndSplice">peek-n-splice</ulink> configuration. </para></section><section><title>Squid Configuration File</title><para><code>SSL Bump-aware setup</code> </para><para>Paste the configuration file like this: </para><screen><![CDATA[# Block Facebook messenger
acl deny_fb_im dstdomain .messenger.com
http_access deny deny_fb_im
deny_info TCP_RESET deny_fb_im]]></screen><para><code>Peek-and-splice setup</code> </para><para>If you prefer not to put proxy certificate to clients, you can configure your proxy like this: </para><screen><![CDATA[# Peek-n-splice rules
acl facebook_messenger ssl::server_name .messenger.com
acl DiscoverSNIHost at_step SslBump1
]]><![CDATA[
ssl_bump peek DiscoverSNIHost
ssl_bump terminate facebook_messenger
ssl_bump splice all]]></screen><para>then reconfigure Squid. </para><para>This is enough to make Facebook Messenger fully unoperable, also as Web-version. </para><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/ConfigExamples/Chat/FacebookMessenger/CategoryConfigExample#">CategoryConfigExample</ulink> </para></section></section></article>