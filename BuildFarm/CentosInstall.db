<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>BuildFarm/CentosInstall</title><revhistory><revision><revnumber>25</revnumber><date>2021-11-07 13:20:05</date><authorinitials>FrancescoChemolli</authorinitials><revremark>mark updated</revremark></revision><revision><revnumber>24</revnumber><date>2021-06-22 22:04:00</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>23</revnumber><date>2018-08-26 15:56:44</date><authorinitials>FrancescoChemolli</authorinitials><revremark>add libtdb</revremark></revision><revision><revnumber>22</revnumber><date>2017-09-11 02:15:13</date><authorinitials>FrancescoChemolli</authorinitials><revremark>update epel reference</revremark></revision><revision><revnumber>21</revnumber><date>2017-07-25 20:04:29</date><authorinitials>FrancescoChemolli</authorinitials><revremark>add git</revremark></revision><revision><revnumber>20</revnumber><date>2015-07-14 18:40:15</date><authorinitials>Eliezer Croitoru</authorinitials><revremark>Adding multi proccessor support.</revremark></revision><revision><revnumber>19</revnumber><date>2015-01-26 13:23:15</date><authorinitials>FrancescoChemolli</authorinitials><revremark>added autoconf-archive</revremark></revision><revision><revnumber>18</revnumber><date>2015-01-13 15:18:00</date><authorinitials>Eliezer Croitoru</authorinitials></revision><revision><revnumber>17</revnumber><date>2014-12-10 10:48:19</date><authorinitials>FrancescoChemolli</authorinitials><revremark>added lsb and java</revremark></revision><revision><revnumber>16</revnumber><date>2014-11-17 10:46:14</date><authorinitials>Eliezer Croitoru</authorinitials><revremark>Missing line in the rpm build node process.</revremark></revision><revision><revnumber>15</revnumber><date>2014-11-04 20:12:13</date><authorinitials>Eliezer Croitoru</authorinitials><revremark>Missing rpm build parameters.</revremark></revision><revision><revnumber>14</revnumber><date>2014-03-11 10:50:56</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>13</revnumber><date>2014-03-11 10:25:44</date><authorinitials>FrancescoChemolli</authorinitials><revremark>added nettle dependency</revremark></revision><revision><revnumber>12</revnumber><date>2014-02-17 14:07:10</date><authorinitials>Eliezer Croitoru</authorinitials><revremark>typo fix</revremark></revision><revision><revnumber>11</revnumber><date>2014-02-17 14:04:46</date><authorinitials>Eliezer Croitoru</authorinitials></revision><revision><revnumber>10</revnumber><date>2014-01-08 09:41:20</date><authorinitials>FrancescoChemolli</authorinitials><revremark>clarified some setup notes</revremark></revision><revision><revnumber>9</revnumber><date>2013-11-11 15:08:32</date><authorinitials>FrancescoChemolli</authorinitials><revremark>added some devel files needed for helpers</revremark></revision><revision><revnumber>8</revnumber><date>2013-08-08 10:57:33</date><authorinitials>FrancescoChemolli</authorinitials><revremark>added make</revremark></revision><revision><revnumber>7</revnumber><date>2013-08-08 08:42:27</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>6</revnumber><date>2013-08-08 08:41:45</date><authorinitials>FrancescoChemolli</authorinitials><revremark>added EPEL repository</revremark></revision><revision><revnumber>5</revnumber><date>2013-08-08 08:23:16</date><authorinitials>FrancescoChemolli</authorinitials><revremark>added ed, newer fedoras don't include it for some reason.</revremark></revision><revision><revnumber>4</revnumber><date>2013-07-24 09:58:05</date><authorinitials>FrancescoChemolli</authorinitials><revremark>tools list fixed</revremark></revision><revision><revnumber>3</revnumber><date>2013-07-24 08:51:01</date><authorinitials>FrancescoChemolli</authorinitials><revremark>added clang to the toolset</revremark></revision><revision><revnumber>2</revnumber><date>2013-01-04 15:37:19</date><authorinitials>FrancescoChemolli</authorinitials><revremark>added missing devel files.</revremark></revision><revision><revnumber>1</revnumber><date>2013-01-04 13:56:39</date><authorinitials>FrancescoChemolli</authorinitials><revremark>Initial revision</revremark></revision></revhistory></articleinfo><section><title>System Setup</title><para>On top of the default system install, run </para><screen><![CDATA[# next step is only needed for RHEL/CentOS 6. Watch out for the version. Not needed for fedora
root% rpm -Uvh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
]]><![CDATA[
root% yum install libxml2 expat-devel openssl-devel libcap ccache libtool-ltdl-devel cppunit cppunit-devel bzr git autoconf automake libtool gcc-c++ perl-Pod-MinimumVersion bzip2 ed make openldap-devel  pam-devel db4-devel  libxml2-devel libcap-devel screen vim nettle-devel redhat-lsb-core autoconf-archive libtdb-devel libtdb
root% useradd -m -G ccache jenkins
]]><![CDATA[
#java. Select the right version and install it
root% yum search headless
]]><![CDATA[
# need to install llvm/clang by hand, as the supplied version is too ancient.
# nettle is available for centos-5 but as of 2014-03 not for centos-6. Download and build from http://www.lysator.liu.se/~nisse/archive/]]></screen><para>set up permissions to the jenkins user, and that's it. </para><para>In case RPMs are to be built, </para><screen><![CDATA[yum install redhat-rpm-config rpm-build rpm-devel
useradd rpm
mkdir /home/rpm/rpmbuild
cd /home/rpm/rpmbuild
mkdir BUILD RPMS SOURCES SPECS SRPMS
chown rpm. -R /home/rpm/rpmbuild
su - rpm
echo '%_topdir %(echo $HOME)/rpmbuild' > ~/.rpmmacros
echo '%__make /usr/bin/make -j 9'>> ~/.rpmmacros]]></screen><itemizedlist><listitem><para><ulink url="http://wiki.centos.org/HowTos/SetupRpmBuildEnvironment">CentOS RPM build envirnment guide</ulink> </para></listitem><listitem><para><ulink url="http://www.g-loaded.eu/2009/04/24/manually-prepare-the-rpm-building-environment/">nice example for multiCPU rpm building environment(-j X)</ulink> </para></listitem></itemizedlist><para><ulink url="https://wiki.squid-cache.org/BuildFarm/CentosInstall/CategoryUpdated#">CategoryUpdated</ulink> </para></section></article>