<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>Features/AclNamespaces</title><revhistory><revision><revnumber>7</revnumber><date>2015-09-21 04:31:34</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>6</revnumber><date>2015-09-21 04:29:57</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>5</revnumber><date>2009-03-08 11:07:18</date><authorinitials>AmosJeffries</authorinitials><revremark>bump this onto the 3.2 todo list</revremark></revision><revision><revnumber>4</revnumber><date>2008-05-18 19:39:00</date><authorinitials>localhost</authorinitials><revremark>converted to 1.6 markup</revremark></revision><revision><revnumber>3</revnumber><date>2008-05-10 06:10:13</date><authorinitials>AmosJeffries</authorinitials><revremark>no status update before 3.1 closed. Bumping to 'any' future version.</revremark></revision><revision><revnumber>2</revnumber><date>2008-03-04 17:59:23</date><authorinitials>eu.squid-cache.org</authorinitials></revision><revision><revnumber>1</revnumber><date>2008-03-04 17:58:38</date><authorinitials>eu.squid-cache.org</authorinitials></revision></revhistory></articleinfo><section><title>Feature: ACL namespaces</title><itemizedlist><listitem><para><emphasis role="strong">Goal</emphasis>: Add namespaces (for example icap and http) for ACL types. </para></listitem><listitem><para><emphasis role="strong">Status</emphasis>: In progress </para></listitem><listitem><para><emphasis role="strong">ETA</emphasis>: unknown </para></listitem><listitem><para><emphasis role="strong">Version</emphasis>: </para></listitem><listitem><para><emphasis role="strong">Developer</emphasis>: <ulink url="https://wiki.squid-cache.org/Features/AclNamespaces/AlexeyVeselovsky#">AlexeyVeselovsky</ulink> </para></listitem><listitem><para><emphasis role="strong">More</emphasis>:  </para></listitem></itemizedlist></section><section><title>Details</title><para>Squid has many ACL types. Many of those types apply to HTTP request or response properties. Since ICAP transactions are using the same request and response classes, many ACLs would work for them <emphasis>as is</emphasis>. </para><para>However, if we stuff ICAP headers into ACL objects and apply existing ACL code to those ICAP headers, then the user will not be able to write ACLs that look at HTTP headers inside the ICAP transaction. If we do the opposite and stuff HTTP headers into ACL objects, then the user will not be able to make decisions based on ICAP headers. </para><para>We should not duplicate the existing acltype support, of course. The code should somehow provide the ACL with the right headers, depending on the scope. </para><para>Non-ICAP options would have HTTP scope as the default. ICAP options may require an explicit scope to avoid confusions. </para><para>Ideally, the design should allow for addition of other namespaces in the future, but this is not critical. </para></section><section><title>Configuration</title><para>Lets assume that the ACL object can store both ICAP and HTTP messages at the same time. The user can specify which message the ACL should apply to using a namespace or scope technique. For example, given a generic rep_status_code ACL type (currently called http_status), the user should be able to say: </para><screen><![CDATA[  acl bad_icap_response icap::rep_status_code 202
  acl bad_http_response http::rep_status_code 555
  icap_retry allow bad_icap_response
  icap_retry allow bad_http_response
  icap_retry deny all]]></screen></section><section><title>Troubleshooting</title><para>No currently known issues. </para><!--rule (<hr>) is not applicable to DocBook--><para> <ulink url="https://wiki.squid-cache.org/Features/AclNamespaces/CategoryFeature#">CategoryFeature</ulink> </para></section></article>