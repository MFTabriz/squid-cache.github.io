For efficiency Squid should include an EDNS OPT record (RFC2671) in it's queries enabling largeish packets (MTU size) over UDP. The 512 octets limit is fairly artificial today.

See also comment #24 in Bug Bug:2447 
