<?xml version="1.0" encoding="utf-8"?><!DOCTYPE article  PUBLIC '-//OASIS//DTD DocBook XML V4.4//EN'  'http://www.docbook.org/xml/4.4/docbookx.dtd'><article><articleinfo><title>DeveloperResources</title><revhistory><revision><revnumber>57</revnumber><date>2021-07-04 22:29:47</date><authorinitials>FrancescoChemolli</authorinitials><revremark>add testing instructions with Docker</revremark></revision><revision><revnumber>56</revnumber><date>2020-05-09 05:00:46</date><authorinitials>AmosJeffries</authorinitials><revremark>Add help for local testing of Squid sources with test-builds.sh and Docker</revremark></revision><revision><revnumber>55</revnumber><date>2020-04-24 10:14:18</date><authorinitials>AmosJeffries</authorinitials><revremark>fix some typos, and generalize the repository reference</revremark></revision><revision><revnumber>54</revnumber><date>2018-11-06 20:40:46</date><authorinitials>AmosJeffries</authorinitials><revremark>list the tools required to run the &quot;make dist&quot; target fully</revremark></revision><revision><revnumber>53</revnumber><date>2018-06-08 11:51:51</date><authorinitials>AmosJeffries</authorinitials><revremark>link to GitHints page for whose who may need it.</revremark></revision><revision><revnumber>52</revnumber><date>2017-09-12 04:49:10</date><authorinitials>AmosJeffries</authorinitials><revremark>update snapshot naming details</revremark></revision><revision><revnumber>51</revnumber><date>2017-08-03 17:50:01</date><authorinitials>AlexRousskov</authorinitials><revremark>Fixed my typo. &quot;sed&quot; is also needed IIRC, but it is &quot;ed&quot; that is sometimes missing in modern environments (e.g., Semaphore CI).</revremark></revision><revision><revnumber>50</revnumber><date>2017-08-02 01:02:33</date><authorinitials>AlexRousskov</authorinitials><revremark>Moved a misplaced phrase from MergeProcedure.</revremark></revision><revision><revnumber>49</revnumber><date>2017-08-01 23:33:07</date><authorinitials>AlexRousskov</authorinitials><revremark>Polished. Removed repetitions, fixed grammar, streamlined presentation. Still needs a lot of work!</revremark></revision><revision><revnumber>48</revnumber><date>2017-08-01 22:26:44</date><authorinitials>AlexRousskov</authorinitials><revremark>Removed stale Squid2, CVS, and bzr info. Added a pointer to the official repository on GitHub.</revremark></revision><revision><revnumber>47</revnumber><date>2015-11-11 16:35:46</date><authorinitials>AmosJeffries</authorinitials><revremark>update squid-dev and build tool requirements, shuffle repository info into tools section</revremark></revision><revision><revnumber>46</revnumber><date>2015-09-24 10:52:48</date><authorinitials>AmosJeffries</authorinitials><revremark>remove outdated documentation reference</revremark></revision><revision><revnumber>45</revnumber><date>2015-09-24 10:30:30</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>44</revnumber><date>2015-08-27 15:54:49</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>43</revnumber><date>2015-03-27 01:55:04</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>42</revnumber><date>2015-03-27 01:54:39</date><authorinitials>AmosJeffries</authorinitials><revremark>updated mailing list info and some other bits (ie Squid-2 is gone, and 3.x CVS is not working now)</revremark></revision><revision><revnumber>41</revnumber><date>2014-12-06 11:11:08</date><authorinitials>AmosJeffries</authorinitials><revremark>link to manuals docs</revremark></revision><revision><revnumber>40</revnumber><date>2012-03-06 06:38:42</date><authorinitials>AmosJeffries</authorinitials><revremark>polish up the dev intro block. This is a how-to for newbies and quick-links for us. half a page of text is hard to read.</revremark></revision><revision><revnumber>39</revnumber><date>2011-11-24 23:21:20</date><authorinitials>AmosJeffries</authorinitials><revremark>add some friendlier descriptions, and mention some gotchas that new contributors have asked about.</revremark></revision><revision><revnumber>38</revnumber><date>2011-09-11 06:56:37</date><authorinitials>AmosJeffries</authorinitials><revremark>link and spellign fixes. mark squid-2 as obsolete and hide (not remove for now) the old docs</revremark></revision><revision><revnumber>37</revnumber><date>2011-03-20 23:09:12</date><authorinitials>AmosJeffries</authorinitials><revremark>more polish and re-links</revremark></revision><revision><revnumber>36</revnumber><date>2011-03-20 23:08:10</date><authorinitials>AmosJeffries</authorinitials><revremark>minor polish updates</revremark></revision><revision><revnumber>35</revnumber><date>2011-03-15 11:07:40</date><authorinitials>AmosJeffries</authorinitials><revremark>updates to CVS and web access to the sources.</revremark></revision><revision><revnumber>34</revnumber><date>2010-08-22 23:05:43</date><authorinitials>AmosJeffries</authorinitials><revremark>mention merge procedure in the patch contribution area. we get too many Q about what to do next.</revremark></revision><revision><revnumber>33</revnumber><date>2010-07-02 03:22:33</date><authorinitials>AmosJeffries</authorinitials><revremark>HEAD to 3.HEAD updates</revremark></revision><revision><revnumber>32</revnumber><date>2010-02-22 12:13:05</date><authorinitials>FrancescoChemolli</authorinitials><revremark>Fixed dangling wiki-links</revremark></revision><revision><revnumber>31</revnumber><date>2009-09-29 07:34:41</date><authorinitials>AmosJeffries</authorinitials><revremark>update to clarify some details and list explicitly the dev required code-access tools.</revremark></revision><revision><revnumber>30</revnumber><date>2009-09-05 03:58:57</date><authorinitials>AmosJeffries</authorinitials><revremark>add required developer software tools list.</revremark></revision><revision><revnumber>29</revnumber><date>2009-09-03 06:39:06</date><authorinitials>AmosJeffries</authorinitials><revremark>correct LP link for teh squid developers branch area</revremark></revision><revision><revnumber>28</revnumber><date>2009-04-09 08:58:07</date><authorinitials>FrancescoChemolli</authorinitials><revremark>Added link to BuildFarm</revremark></revision><revision><revnumber>27</revnumber><date>2009-01-31 01:01:25</date><authorinitials>AmosJeffries</authorinitials><revremark>link to wiki HTTP/1.1 checklist</revremark></revision><revision><revnumber>26</revnumber><date>2009-01-12 05:08:05</date><authorinitials>AmosJeffries</authorinitials><revremark>few more things.</revremark></revision><revision><revnumber>25</revnumber><date>2008-08-07 11:12:28</date><authorinitials>AmosJeffries</authorinitials><revremark>found wiki upgrade errors</revremark></revision><revision><revnumber>24</revnumber><date>2008-08-03 17:35:02</date><authorinitials>FrancescoChemolli</authorinitials></revision><revision><revnumber>23</revnumber><date>2008-07-18 14:20:22</date><authorinitials>AmosJeffries</authorinitials><revremark>add ref to MergeProcedure</revremark></revision><revision><revnumber>22</revnumber><date>2008-05-18 19:38:55</date><authorinitials>localhost</authorinitials><revremark>converted to 1.6 markup</revremark></revision><revision><revnumber>21</revnumber><date>2008-04-20 09:23:49</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>20</revnumber><date>2008-04-20 08:44:44</date><authorinitials>AmosJeffries</authorinitials><revremark>update the VCS comments to incude Bazaar more, and indicated CVS is for Squid-2 now.</revremark></revision><revision><revnumber>19</revnumber><date>2008-04-07 05:16:47</date><authorinitials>FrancescoChemolli</authorinitials><revremark>Added reference to rsync</revremark></revision><revision><revnumber>18</revnumber><date>2007-10-12 20:12:31</date><authorinitials>AlexRousskov</authorinitials><revremark>Removed DeadProjects link. Log Daemon project is now in Features.</revremark></revision><revision><revnumber>17</revnumber><date>2007-10-11 14:26:01</date><authorinitials>AlexRousskov</authorinitials><revremark>Replaced NiceLittleProjects reference with a link to Wish List</revremark></revision><revision><revnumber>16</revnumber><date>2007-10-08 23:28:05</date><authorinitials>AlexRousskov</authorinitials><revremark>Compressed information about Code Sprints</revremark></revision><revision><revnumber>15</revnumber><date>2007-10-05 20:06:03</date><authorinitials>AlexRousskov</authorinitials><revremark>grammar</revremark></revision><revision><revnumber>14</revnumber><date>2007-10-05 20:04:45</date><authorinitials>AlexRousskov</authorinitials><revremark>fixed links</revremark></revision><revision><revnumber>13</revnumber><date>2007-10-05 20:01:03</date><authorinitials>AlexRousskov</authorinitials><revremark>spell checked and polished</revremark></revision><revision><revnumber>12</revnumber><date>2007-06-30 09:25:26</date><authorinitials>AmosJeffries</authorinitials></revision><revision><revnumber>11</revnumber><date>2007-03-17 16:29:09</date><authorinitials>GuidoSerassio</authorinitials></revision><revision><revnumber>10</revnumber><date>2007-03-16 23:26:24</date><authorinitials>kinkie</authorinitials><revremark>Moved info about code sprints from the front page</revremark></revision><revision><revnumber>9</revnumber><date>2007-03-02 18:08:10</date><authorinitials>kinkie</authorinitials></revision><revision><revnumber>8</revnumber><date>2006-09-23 18:58:39</date><authorinitials>kinkie</authorinitials><revremark>Added some links</revremark></revision><revision><revnumber>7</revnumber><date>2006-09-21 21:49:15</date><authorinitials>kinkie</authorinitials><revremark>Added link to SquidInternals</revremark></revision><revision><revnumber>6</revnumber><date>2006-08-23 15:09:04</date><authorinitials>kinkie</authorinitials></revision><revision><revnumber>5</revnumber><date>2006-08-23 15:07:47</date><authorinitials>kinkie</authorinitials><revremark>added link to who we are</revremark></revision><revision><revnumber>4</revnumber><date>2006-08-23 15:05:16</date><authorinitials>kinkie</authorinitials></revision><revision><revnumber>3</revnumber><date>2006-08-21 10:35:55</date><authorinitials>Henrik Nordström</authorinitials><revremark>Cosmetic Syntax error</revremark></revision><revision><revnumber>2</revnumber><date>2006-08-21 10:10:41</date><authorinitials>Henrik Nordström</authorinitials></revision><revision><revnumber>1</revnumber><date>2006-08-18 22:51:19</date><authorinitials>kinkie</authorinitials><revremark>Set things up as an adaptation of the docuwiki.</revremark></revision></revhistory></articleinfo><section><title>Contributing code</title><para>The best way to contribute code is to submit a high-quality <ulink url="https://github.com/squid-cache/squid/pulls">pull request</ulink> against the master branch of the official <ulink url="https://github.com/squid-cache/squid">repository</ulink> on GitHub. To speed up code review and improve your code acceptance chances, please adhere to <ulink url="https://wiki.squid-cache.org/DeveloperResources/SquidCodingGuidelines#">SquidCodingGuidelines</ulink> and follow the <ulink url="https://wiki.squid-cache.org/DeveloperResources/MergeProcedure#">MergeProcedure</ulink>. </para><para><ulink url="https://wiki.squid-cache.org/DeveloperResources/ProgrammingGuide#">ProgrammingGuide</ulink> provides a broad overview of Squid architecture and details some of Squid modules. It also discusses <ulink url="https://wiki.squid-cache.org/DeveloperResources/ProgrammingGuide/ManualDocumentation#">manual page writing</ulink>. </para><para>Auto-generated <ulink url="http://www.squid-cache.org/Doc/code/">code documentation</ulink> offers some information on the Squid internals with links to the latest version of the code. </para><para>Finding things to do: </para><itemizedlist><listitem><para><ulink url="http://bugs.squid-cache.org/">Bugzilla</ulink> contains bugs and feature requests. </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/DeveloperResources/RoadMap#">RoadMap</ulink> lists the feature wishes and plans for future releases. </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/DeveloperResources/RoadMap/Tasks#">RoadMap/Tasks</ulink> itemizes general cleanup tasks that need to be done. These can be good introductory tasks. </para></listitem><listitem><para><ulink url="https://wiki.squid-cache.org/DeveloperResources/Features/HTTP11#">HTTP/1.1 compliance</ulink> violations need to be addressed. </para></listitem><listitem><para><code>git grep XXX</code> </para></listitem><listitem><para><code>git grep TODO</code> </para></listitem><listitem><para>Other developers are often able to provide projects for anyone just wanting to contribute. </para></listitem></itemizedlist></section><section><title>Discussing code</title><para>Most development discussions happen on the <ulink url="http://www.squid-cache.org/Support/mailing-lists.html#squid-dev">developer mailing list</ulink>. Please note that all messages must be sent in plain-text only (no HTML email). </para></section><section><title>Testing</title><para>We run constant integration testing with a <ulink url="https://wiki.squid-cache.org/DeveloperResources/BuildFarm#">BuildFarm</ulink>. </para><para>It is possible to rely on the images we use for it to test code changes against different Linux distributions and compiler versions. We publish these images to the <ulink url="https://hub.docker.com/orgs/squidcache/repositories">Docker Hub</ulink>. They are named <code>squidcache/buildfarm-`uname -m`-&lt;os name&gt;</code> </para><para>Assuming you have access to a Docker environment, the easiest way to test a local checkout on it is to run the command: </para><para><code>OS=centos-7 docker run -ti --rm -v$PWD:$PWD -w$PWD -u1000 ./test-builds.sh squidcache/buildfarm-`uname -m`-$OS --verbose --use-config-cache --cleanup</code> </para><para>It may leave behind some files owned by UID 1000; sorry it can't be avoided </para><section><title>Detecting build errors early</title><para>It is always better to find bugs before submitting a PR for review. Since Squid has such a large number of build permutations that can interact to change build dependencies and outcomes the a <emphasis role="strong">test-builds.sh</emphasis> script is provided in the repository to check that your code contribution will at least compile successfully. This is the same script which will be run by the CI system in a wider range of OS systems to prevent regressions. </para><para>In a checkout of the Squid sources branch you are proposing to submit for PR, run: ` ./bootstrap.sh &amp;&amp; ./test-builds.sh ` </para><para>The default stdout display just lists the ERROR and FAIL messages produced during build. Not all of these are problems (eg stats indicating 0 failures), a series of logs with full build output are provided as well. See the end of the log for overall build result if you have any doubts about the success/failure status. </para><para>The command line option <emphasis role="strong">--keep-going</emphasis> is provided to allow as many error as possible to be found on one script execution. It builds with <emphasis role="strong">make -k</emphasis> and tries all build permutations instead of exiting on the first compile failure. </para><para>The command line option <emphasis role="strong">--verbose</emphasis> is provided to allow full compile output to stdout instead of only to logs. The logs are still produced. </para><para>Other options are available for specific build situations. See the script for details or ask on squid-dev mailing list. </para></section><section><title>Replication of CI BuildFarm failures</title><para>On any linux system with docker installed, to reproduce a build you can check out squid sources on a fresh directory, then run: </para><para>` OS_VERSION=fedora-32 docker run -ti --rm -u jenkins -v $PWD:$PWD -w $PWD squidcache/buildfarm:<code>uname -m</code>-$OS_VERSION /bin/bash -l ` </para><itemizedlist><listitem override="none"><para><inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> Replace OS_VERSION with the OS version of the CI system node which is failing (eg, fedora-rawhide, debian-unstable) </para></listitem></itemizedlist><para>This will drop you in the container, ready to try things out. </para></section></section><section><title>Getting sources</title><para>There are several ways to get Squid sources. The method you select determines whether the sources come bootstrapped or can be easily updated as the official code changes. </para><section><title>Raw sources via GitHub</title><para>The official Squid source code repository is on <ulink url="https://github.com/squid-cache/squid">GitHub</ulink>. see <ulink url="https://wiki.squid-cache.org/DeveloperResources/GitHints#">GitHints</ulink> for common actions you may need to perform with the git VCS. </para><itemizedlist><listitem override="none"><para><inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> When working from this repository the <emphasis role="strong">bootstrap.sh</emphasis> script is required to prepare ./configure and related magic. See <link linkend="Required_Build_Tools">#Required_Build_Tools</link> for the required bootstrapping and building tools. </para></listitem></itemizedlist></section><section><title>Bootstrapped source tarballs via HTTP</title><para>The latest sources are available at address <ulink url="http://www.squid-cache.org/Versions/"/> with a series of previous daily snapshots of the code for testing regressions and other special circumstances. </para><itemizedlist><listitem override="none"><para><inlinemediaobject><imageobject><imagedata depth="16" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/icon-info.png" width="16"/></imageobject><textobject><phrase>{i}</phrase></textobject></inlinemediaobject> The daily tarballs displayed are listed by date created and the repository revision ID included in that tarball. Gaps are expected in the list when there were no new revisions committed that day, or when the revision failed to compile on our tarball creation machine. </para><para><inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> Daily tarballs contain the fully bootstrapped tool chain ready to build. But be aware that some changes may appear with incomplete or missing documentation. </para></listitem></itemizedlist><para>As a more lightweight alternative you can use rsync to fetch the latest tarball content. </para></section><section><title>Bootstrapped sources via rsync</title><para>As a more lightweight alternative to the tarballs you can use rsync; the latest sources are available at address <code>rsync://squid-cache.org/source/&lt;version&gt;</code> </para><para>The rsync source mirrors the latest published sources tarball. </para><para><inlinemediaobject><imageobject><imagedata depth="15" fileref="https://wiki.squid-cache.org/wiki/squidtheme/img/alert.png" width="15"/></imageobject><textobject><phrase>/!\</phrase></textobject></inlinemediaobject> The rsync sources contain the fully bootstrapped tool chain ready to build. But be aware that some changes may appear with incomplete or missing documentation. </para><para>To use this feature you may use </para><screen><![CDATA[$ rsync rsync://squid-cache.org/source
(sample output)
drwxr-xr-x         512 2011/03/20 19:14:28 .
drwxr-xr-x        1024 2009/09/17 14:13:26 squid-2.6
drwxr-xr-x        1024 2011/03/20 19:14:06 squid-2.7
drwxr-xr-x        1024 2010/07/02 13:10:53 squid-2
drwxr-xr-x        1024 2010/07/02 13:17:48 squid-3.0
drwxr-xr-x        1024 2011/03/20 19:14:21 squid-3.1
drwxr-xr-x        1024 2011/03/20 19:14:26 squid-3.2
drwxr-xr-x        1024 2011/03/20 19:14:26 squid-3.3
drwxr-xr-x        1024 2011/03/20 19:14:26 squid-3.4
drwxr-xr-x        1024 2011/03/20 19:14:26 squid-3.5
drwxr-xr-x        1024 2011/03/20 19:14:13 squid-4]]></screen><para>After you've selected the version you wish to download you can: </para><screen><![CDATA[rsync -avz rsync://squid-cache.org/source/<version> .]]></screen></section></section><section><title>Required Build Tools</title><itemizedlist><listitem><para>autoconf 2.64 or later </para></listitem><listitem><para>automake 1.10 or later </para></listitem><listitem><para>libtool 2.6 or later </para></listitem><listitem><para>libltdl-dev </para></listitem><listitem><para>awk </para></listitem><listitem><para>ed </para></listitem><listitem><para><ulink url="http://cppunit.sourceforge.net/cppunit-wiki">CppUnit</ulink> for unit testing. </para></listitem></itemizedlist><para>Depending on what features you wish to develop there may be other library and tool requirements. </para><para>Building tarballs for distribution requires these additional tools: </para><itemizedlist><listitem><para>autoconf-archive </para></listitem><listitem><para>tar </para></listitem><listitem><para>gzip </para></listitem><listitem><para>bzip2 </para></listitem><listitem><para>xz </para></listitem><listitem><para>perl </para></listitem></itemizedlist><para>When working from the repository code the <emphasis role="strong">bootstrap.sh</emphasis> script is required initially to run a number of autotools to prepare ./configure and related magic. This needs repeating after any changes to the Makefile.am or configure.ac scripts, including changes received from the repository updates. Common bootstrap.sh problems are discussed in <ulink url="https://wiki.squid-cache.org/DeveloperResources/ProgrammingGuide/Bootstrap#">ProgrammingGuide/Bootstrap</ulink>. </para></section><section><title>Miscellaneous</title><para><ulink url="https://wiki.squid-cache.org/DeveloperResources/ReleaseProcess#">ReleaseProcess</ulink> describes the process and criteria used by the Squid Developers when making new Squid releases from the accepted changes. </para><para><ulink url="https://wiki.squid-cache.org/DeveloperResources/WhoWeAre#">WhoWeAre</ulink> explains who the people working on the Squid project are. </para><para>During the life of the Squid project, a number of <ulink url="http://www.squid-cache.org/Devel/papers/">papers</ulink> have been published. </para><para>Code Sprints are informal gatherings of Squid developers with a focus on developing urgently needed features or fixing major bugs. You can find links to related documents in <ulink url="https://wiki.squid-cache.org/DeveloperResources/MeetUps#">MeetUps</ulink>. </para></section></article>